### ***
### WARNING: DO NOT manually EDIT or MERGE this file, it is generated by 'make .circleci/config/@build-release.yml'.
### INSTEAD: Edit or merge the source in packages-oss.lock/pkgs.yml .circleci/config/@build-release.yml.tpl then run 'make .circleci/config/@build-release.yml'.
### ***
# Current cache version: cache002

executors:
  releaser:
    docker:
      - image: circleci/buildpack-deps
    environment:
      PRODUCT_REVISION: "dfb88dd7ada1aeb33e0d5dbd8aa31240cb3d7056"
      AUTO_INSTALL_TOOLS: 'YES'
    shell: /usr/bin/env bash -euo pipefail -c

workflows:
  build-dfb88dd7ada1aeb33e0d5dbd8aa31240cb3d7056-1b63df3151c4231f:
    jobs:
      - cache-builder-images:
          filters:
            branches:
              only:
                - /build-.*/
                - /ci.*/
      - darwin_386_package: { requires: [ cache-builder-images ] }
      - darwin_amd64_package: { requires: [ cache-builder-images ] }
      - freebsd_386_package: { requires: [ cache-builder-images ] }
      - freebsd_amd64_package: { requires: [ cache-builder-images ] }
      - freebsd_arm_package: { requires: [ cache-builder-images ] }
      - linux_386_package: { requires: [ cache-builder-images ] }
      - linux_amd64_package: { requires: [ cache-builder-images ] }
      - linux_arm_package: { requires: [ cache-builder-images ] }
      - linux_arm64_package: { requires: [ cache-builder-images ] }
      - netbsd_386_package: { requires: [ cache-builder-images ] }
      - netbsd_amd64_package: { requires: [ cache-builder-images ] }
      - openbsd_386_package: { requires: [ cache-builder-images ] }
      - openbsd_amd64_package: { requires: [ cache-builder-images ] }
      - solaris_amd64_package: { requires: [ cache-builder-images ] }
      - windows_386_package: { requires: [ cache-builder-images ] }
      - windows_amd64_package: { requires: [ cache-builder-images ] }
      - bundle-releases:
          requires:
            - darwin_386_package
            - darwin_amd64_package
            - freebsd_386_package
            - freebsd_amd64_package
            - freebsd_arm_package
            - linux_386_package
            - linux_amd64_package
            - linux_arm_package
            - linux_arm64_package
            - netbsd_386_package
            - netbsd_amd64_package
            - openbsd_386_package
            - openbsd_amd64_package
            - solaris_amd64_package
            - windows_386_package
            - windows_amd64_package
jobs:
  cache-builder-images:
    executor: releaser
    steps:
      - setup_remote_docker
      - checkout
      - write-build-layer-cache-keys

      # Load best available cached image.
      - restore_cache:
          keys:
            - cache002-build-static-assets_37fc_{{checksum ".buildcache/cache-keys/build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f"}}
            - cache002-build-ui_c937_{{checksum ".buildcache/cache-keys/build-ui-c937a082f8421679ff11d63348e19af07f067cbb"}}
            - cache002-ui-dependencies_7435_{{checksum ".buildcache/cache-keys/ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1"}}
            - cache002-install-yarn_926d_{{checksum ".buildcache/cache-keys/install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3"}}
            - cache002-set-workdir_cde3_{{checksum ".buildcache/cache-keys/set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde"}}
            - cache002-install-go-tools_32c4_{{checksum ".buildcache/cache-keys/install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996"}}
            - cache002-install-go_1f0b_{{checksum ".buildcache/cache-keys/install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca"}}
            - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run:
          name: Finish early if loaded exact match from cache.
          command: |
            if [ -f .buildcache/archives/07-build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f.tar.gz ]; then
              echo "Exact match found in cache, skipping build."
              circleci-agent step halt
            else
              echo "No exact match found, proceeding with build."
            fi
      - run: LAYER_SPEC_ID=07-build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f make -C packages*.lock load-builder-cache

      # No exact match was found, so build each layer up to target type.
      - run: make -f packages*.lock/layer.mk 00-base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9-image
      - run: make -f packages*.lock/layer.mk 01-install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca-image
      - run: make -f packages*.lock/layer.mk 02-install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996-image
      - run: make -f packages*.lock/layer.mk 03-set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde-image
      - run: make -f packages*.lock/layer.mk 04-install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3-image
      - run: make -f packages*.lock/layer.mk 05-ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1-image
      - run: make -f packages*.lock/layer.mk 06-build-ui-c937a082f8421679ff11d63348e19af07f067cbb-image
      - run: make -f packages*.lock/layer.mk 07-build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f-image

      # Save the target layer archive.
      
      - run: make -f packages*.lock/layer.mk 07-build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f-save
      
      # Store the target layer archive as all the relevant cache names.
      - save_cache:
          key: cache002-build-static-assets_37fc_{{checksum ".buildcache/cache-keys/build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f"}}
          paths:
            - .buildcache/archives/07-build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f.tar.gz
      - run: mv .buildcache/archives/07-build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f.tar.gz .buildcache/archives/06-build-ui-c937a082f8421679ff11d63348e19af07f067cbb.tar.gz
      - save_cache:
          key: cache002-build-ui_c937_{{checksum ".buildcache/cache-keys/build-ui-c937a082f8421679ff11d63348e19af07f067cbb"}}
          paths:
            - .buildcache/archives/06-build-ui-c937a082f8421679ff11d63348e19af07f067cbb.tar.gz
      - run: mv .buildcache/archives/06-build-ui-c937a082f8421679ff11d63348e19af07f067cbb.tar.gz .buildcache/archives/05-ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1.tar.gz
      - save_cache:
          key: cache002-ui-dependencies_7435_{{checksum ".buildcache/cache-keys/ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1"}}
          paths:
            - .buildcache/archives/05-ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1.tar.gz
      - run: mv .buildcache/archives/05-ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1.tar.gz .buildcache/archives/04-install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3.tar.gz
      - save_cache:
          key: cache002-install-yarn_926d_{{checksum ".buildcache/cache-keys/install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3"}}
          paths:
            - .buildcache/archives/04-install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3.tar.gz
      - run: mv .buildcache/archives/04-install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3.tar.gz .buildcache/archives/03-set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde.tar.gz
      - save_cache:
          key: cache002-set-workdir_cde3_{{checksum ".buildcache/cache-keys/set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde"}}
          paths:
            - .buildcache/archives/03-set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde.tar.gz
      - run: mv .buildcache/archives/03-set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde.tar.gz .buildcache/archives/02-install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996.tar.gz
      - save_cache:
          key: cache002-install-go-tools_32c4_{{checksum ".buildcache/cache-keys/install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996"}}
          paths:
            - .buildcache/archives/02-install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996.tar.gz
      - run: mv .buildcache/archives/02-install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996.tar.gz .buildcache/archives/01-install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca.tar.gz
      - save_cache:
          key: cache002-install-go_1f0b_{{checksum ".buildcache/cache-keys/install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca"}}
          paths:
            - .buildcache/archives/01-install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca.tar.gz
      - run: mv .buildcache/archives/01-install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca.tar.gz .buildcache/archives/00-base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9.tar.gz
      - save_cache:
          key: cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
          paths:
            - .buildcache/archives/00-base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9.tar.gz
  darwin_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 83a92882e8b9793347a81a5e7d8aa9ea8c3695cd
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-83a92882e8b9793347a81a5e7d8aa9ea8c3695cd-{{checksum ".buildcache/cache-keys/package-83a92882e8b9793347a81a5e7d8aa9ea8c3695cd"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_db21_{{checksum ".buildcache/cache-keys/copy-source-db216d38c000cb49e8f7f225a9bc673fb21d4f4b"}}
          - cache002-warm-go-build-vendor-cache_8ed9_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-8ed94ce8cc534fd2d431860f24b35a2c351fa5ea"}}
          - cache002-build-static-assets_37fc_{{checksum ".buildcache/cache-keys/build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f"}}
          - cache002-build-ui_c937_{{checksum ".buildcache/cache-keys/build-ui-c937a082f8421679ff11d63348e19af07f067cbb"}}
          - cache002-ui-dependencies_7435_{{checksum ".buildcache/cache-keys/ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1"}}
          - cache002-install-yarn_926d_{{checksum ".buildcache/cache-keys/install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3"}}
          - cache002-set-workdir_cde3_{{checksum ".buildcache/cache-keys/set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde"}}
          - cache002-install-go-tools_32c4_{{checksum ".buildcache/cache-keys/install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996"}}
          - cache002-install-go_1f0b_{{checksum ".buildcache/cache-keys/install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-83a92882e8b9793347a81a5e7d8aa9ea8c3695cd-{{checksum ".buildcache/cache-keys/package-83a92882e8b9793347a81a5e7d8aa9ea8c3695cd"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-8ed94ce8cc534fd2d431860f24b35a2c351fa5ea.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-8ed94ce8cc534fd2d431860f24b35a2c351fa5ea-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_8ed9_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-8ed94ce8cc534fd2d431860f24b35a2c351fa5ea"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-8ed94ce8cc534fd2d431860f24b35a2c351fa5ea.tar.gz

  darwin_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 35387dba3e323c26b914c969c71ca357f2276f1d
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-35387dba3e323c26b914c969c71ca357f2276f1d-{{checksum ".buildcache/cache-keys/package-35387dba3e323c26b914c969c71ca357f2276f1d"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_4daf_{{checksum ".buildcache/cache-keys/copy-source-4dafdbfe78748a819151eac5f1ebe1bc152a1dcc"}}
          - cache002-warm-go-build-vendor-cache_cd62_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-cd628217acd546238858765232258d84a238b5a9"}}
          - cache002-build-static-assets_37fc_{{checksum ".buildcache/cache-keys/build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f"}}
          - cache002-build-ui_c937_{{checksum ".buildcache/cache-keys/build-ui-c937a082f8421679ff11d63348e19af07f067cbb"}}
          - cache002-ui-dependencies_7435_{{checksum ".buildcache/cache-keys/ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1"}}
          - cache002-install-yarn_926d_{{checksum ".buildcache/cache-keys/install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3"}}
          - cache002-set-workdir_cde3_{{checksum ".buildcache/cache-keys/set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde"}}
          - cache002-install-go-tools_32c4_{{checksum ".buildcache/cache-keys/install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996"}}
          - cache002-install-go_1f0b_{{checksum ".buildcache/cache-keys/install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-35387dba3e323c26b914c969c71ca357f2276f1d-{{checksum ".buildcache/cache-keys/package-35387dba3e323c26b914c969c71ca357f2276f1d"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-cd628217acd546238858765232258d84a238b5a9.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-cd628217acd546238858765232258d84a238b5a9-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_cd62_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-cd628217acd546238858765232258d84a238b5a9"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-cd628217acd546238858765232258d84a238b5a9.tar.gz

  freebsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 4eaeb7690739ba4d6789bf85c1051fca7754425f
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-4eaeb7690739ba4d6789bf85c1051fca7754425f-{{checksum ".buildcache/cache-keys/package-4eaeb7690739ba4d6789bf85c1051fca7754425f"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_8392_{{checksum ".buildcache/cache-keys/copy-source-8392958bc5db3584bb313f708d4dd8428bc26354"}}
          - cache002-warm-go-build-vendor-cache_c8bf_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-c8bf408d7384d11baf7d0c1b87414d7021bdfea3"}}
          - cache002-build-static-assets_37fc_{{checksum ".buildcache/cache-keys/build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f"}}
          - cache002-build-ui_c937_{{checksum ".buildcache/cache-keys/build-ui-c937a082f8421679ff11d63348e19af07f067cbb"}}
          - cache002-ui-dependencies_7435_{{checksum ".buildcache/cache-keys/ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1"}}
          - cache002-install-yarn_926d_{{checksum ".buildcache/cache-keys/install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3"}}
          - cache002-set-workdir_cde3_{{checksum ".buildcache/cache-keys/set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde"}}
          - cache002-install-go-tools_32c4_{{checksum ".buildcache/cache-keys/install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996"}}
          - cache002-install-go_1f0b_{{checksum ".buildcache/cache-keys/install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-4eaeb7690739ba4d6789bf85c1051fca7754425f-{{checksum ".buildcache/cache-keys/package-4eaeb7690739ba4d6789bf85c1051fca7754425f"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-c8bf408d7384d11baf7d0c1b87414d7021bdfea3.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-c8bf408d7384d11baf7d0c1b87414d7021bdfea3-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_c8bf_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-c8bf408d7384d11baf7d0c1b87414d7021bdfea3"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-c8bf408d7384d11baf7d0c1b87414d7021bdfea3.tar.gz

  freebsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: ce0e61edc2eb4040ee1cb17abb9eabfcaa1401b1
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-ce0e61edc2eb4040ee1cb17abb9eabfcaa1401b1-{{checksum ".buildcache/cache-keys/package-ce0e61edc2eb4040ee1cb17abb9eabfcaa1401b1"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_7087_{{checksum ".buildcache/cache-keys/copy-source-7087cdb59fc9d1db5562048ccf45e07e569c5aa3"}}
          - cache002-warm-go-build-vendor-cache_b2bf_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-b2bfce3fbf87b1746c0dfa68b315439d1b7baf0c"}}
          - cache002-build-static-assets_37fc_{{checksum ".buildcache/cache-keys/build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f"}}
          - cache002-build-ui_c937_{{checksum ".buildcache/cache-keys/build-ui-c937a082f8421679ff11d63348e19af07f067cbb"}}
          - cache002-ui-dependencies_7435_{{checksum ".buildcache/cache-keys/ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1"}}
          - cache002-install-yarn_926d_{{checksum ".buildcache/cache-keys/install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3"}}
          - cache002-set-workdir_cde3_{{checksum ".buildcache/cache-keys/set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde"}}
          - cache002-install-go-tools_32c4_{{checksum ".buildcache/cache-keys/install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996"}}
          - cache002-install-go_1f0b_{{checksum ".buildcache/cache-keys/install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-ce0e61edc2eb4040ee1cb17abb9eabfcaa1401b1-{{checksum ".buildcache/cache-keys/package-ce0e61edc2eb4040ee1cb17abb9eabfcaa1401b1"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-b2bfce3fbf87b1746c0dfa68b315439d1b7baf0c.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-b2bfce3fbf87b1746c0dfa68b315439d1b7baf0c-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_b2bf_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-b2bfce3fbf87b1746c0dfa68b315439d1b7baf0c"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-b2bfce3fbf87b1746c0dfa68b315439d1b7baf0c.tar.gz

  freebsd_arm_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 9211399fb35e6c59706319c732f918d73f15d866
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-9211399fb35e6c59706319c732f918d73f15d866-{{checksum ".buildcache/cache-keys/package-9211399fb35e6c59706319c732f918d73f15d866"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_2b9c_{{checksum ".buildcache/cache-keys/copy-source-2b9cd1809d38c2b36f12b4cd858b9d7d8490534e"}}
          - cache002-warm-go-build-vendor-cache_14e9_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-14e9599d0e1338e62e934fdd5dc9de631501b93d"}}
          - cache002-build-static-assets_37fc_{{checksum ".buildcache/cache-keys/build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f"}}
          - cache002-build-ui_c937_{{checksum ".buildcache/cache-keys/build-ui-c937a082f8421679ff11d63348e19af07f067cbb"}}
          - cache002-ui-dependencies_7435_{{checksum ".buildcache/cache-keys/ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1"}}
          - cache002-install-yarn_926d_{{checksum ".buildcache/cache-keys/install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3"}}
          - cache002-set-workdir_cde3_{{checksum ".buildcache/cache-keys/set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde"}}
          - cache002-install-go-tools_32c4_{{checksum ".buildcache/cache-keys/install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996"}}
          - cache002-install-go_1f0b_{{checksum ".buildcache/cache-keys/install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-9211399fb35e6c59706319c732f918d73f15d866-{{checksum ".buildcache/cache-keys/package-9211399fb35e6c59706319c732f918d73f15d866"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-14e9599d0e1338e62e934fdd5dc9de631501b93d.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-14e9599d0e1338e62e934fdd5dc9de631501b93d-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_14e9_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-14e9599d0e1338e62e934fdd5dc9de631501b93d"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-14e9599d0e1338e62e934fdd5dc9de631501b93d.tar.gz

  linux_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 089be6329b5546be0473ea4c309750317c22e74e
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-089be6329b5546be0473ea4c309750317c22e74e-{{checksum ".buildcache/cache-keys/package-089be6329b5546be0473ea4c309750317c22e74e"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_c754_{{checksum ".buildcache/cache-keys/copy-source-c7546f4e41cf51738817cd9b11b77dd25aef341e"}}
          - cache002-warm-go-build-vendor-cache_62c1_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-62c182eb7af168b14231446f7307585ebe4086d5"}}
          - cache002-build-static-assets_37fc_{{checksum ".buildcache/cache-keys/build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f"}}
          - cache002-build-ui_c937_{{checksum ".buildcache/cache-keys/build-ui-c937a082f8421679ff11d63348e19af07f067cbb"}}
          - cache002-ui-dependencies_7435_{{checksum ".buildcache/cache-keys/ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1"}}
          - cache002-install-yarn_926d_{{checksum ".buildcache/cache-keys/install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3"}}
          - cache002-set-workdir_cde3_{{checksum ".buildcache/cache-keys/set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde"}}
          - cache002-install-go-tools_32c4_{{checksum ".buildcache/cache-keys/install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996"}}
          - cache002-install-go_1f0b_{{checksum ".buildcache/cache-keys/install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-089be6329b5546be0473ea4c309750317c22e74e-{{checksum ".buildcache/cache-keys/package-089be6329b5546be0473ea4c309750317c22e74e"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-62c182eb7af168b14231446f7307585ebe4086d5.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-62c182eb7af168b14231446f7307585ebe4086d5-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_62c1_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-62c182eb7af168b14231446f7307585ebe4086d5"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-62c182eb7af168b14231446f7307585ebe4086d5.tar.gz

  linux_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 6f389fc309f1f1d500043bad3ef8b9728cb11628
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-6f389fc309f1f1d500043bad3ef8b9728cb11628-{{checksum ".buildcache/cache-keys/package-6f389fc309f1f1d500043bad3ef8b9728cb11628"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_9eaa_{{checksum ".buildcache/cache-keys/copy-source-9eaa126540910740dc86404911cb1df919e32488"}}
          - cache002-warm-go-build-vendor-cache_457b_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-457b86a970f3c6ce56e86801d246abb094437383"}}
          - cache002-build-static-assets_37fc_{{checksum ".buildcache/cache-keys/build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f"}}
          - cache002-build-ui_c937_{{checksum ".buildcache/cache-keys/build-ui-c937a082f8421679ff11d63348e19af07f067cbb"}}
          - cache002-ui-dependencies_7435_{{checksum ".buildcache/cache-keys/ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1"}}
          - cache002-install-yarn_926d_{{checksum ".buildcache/cache-keys/install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3"}}
          - cache002-set-workdir_cde3_{{checksum ".buildcache/cache-keys/set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde"}}
          - cache002-install-go-tools_32c4_{{checksum ".buildcache/cache-keys/install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996"}}
          - cache002-install-go_1f0b_{{checksum ".buildcache/cache-keys/install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-6f389fc309f1f1d500043bad3ef8b9728cb11628-{{checksum ".buildcache/cache-keys/package-6f389fc309f1f1d500043bad3ef8b9728cb11628"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-457b86a970f3c6ce56e86801d246abb094437383.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-457b86a970f3c6ce56e86801d246abb094437383-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_457b_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-457b86a970f3c6ce56e86801d246abb094437383"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-457b86a970f3c6ce56e86801d246abb094437383.tar.gz

  linux_arm_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: f5be59f5c5705844f9dfaa248fe4e3e1abb67e3c
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-f5be59f5c5705844f9dfaa248fe4e3e1abb67e3c-{{checksum ".buildcache/cache-keys/package-f5be59f5c5705844f9dfaa248fe4e3e1abb67e3c"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_65bd_{{checksum ".buildcache/cache-keys/copy-source-65bdad4ee006ce4f04fc27b6fecd4d2f24885ae4"}}
          - cache002-warm-go-build-vendor-cache_2fb5_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-2fb51e02153b8ebdf8fa8dde9b19848856688615"}}
          - cache002-build-static-assets_37fc_{{checksum ".buildcache/cache-keys/build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f"}}
          - cache002-build-ui_c937_{{checksum ".buildcache/cache-keys/build-ui-c937a082f8421679ff11d63348e19af07f067cbb"}}
          - cache002-ui-dependencies_7435_{{checksum ".buildcache/cache-keys/ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1"}}
          - cache002-install-yarn_926d_{{checksum ".buildcache/cache-keys/install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3"}}
          - cache002-set-workdir_cde3_{{checksum ".buildcache/cache-keys/set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde"}}
          - cache002-install-go-tools_32c4_{{checksum ".buildcache/cache-keys/install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996"}}
          - cache002-install-go_1f0b_{{checksum ".buildcache/cache-keys/install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-f5be59f5c5705844f9dfaa248fe4e3e1abb67e3c-{{checksum ".buildcache/cache-keys/package-f5be59f5c5705844f9dfaa248fe4e3e1abb67e3c"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-2fb51e02153b8ebdf8fa8dde9b19848856688615.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-2fb51e02153b8ebdf8fa8dde9b19848856688615-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_2fb5_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-2fb51e02153b8ebdf8fa8dde9b19848856688615"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-2fb51e02153b8ebdf8fa8dde9b19848856688615.tar.gz

  linux_arm64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: d6891a70bde266011da4cc2735bcbb7f3fc9902a
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-d6891a70bde266011da4cc2735bcbb7f3fc9902a-{{checksum ".buildcache/cache-keys/package-d6891a70bde266011da4cc2735bcbb7f3fc9902a"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_8b52_{{checksum ".buildcache/cache-keys/copy-source-8b526dab0f970f061a9b6fb3d94001be5640d539"}}
          - cache002-warm-go-build-vendor-cache_d64f_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-d64f505f58203dc7743b7ccbe9efe6d97d7ffa70"}}
          - cache002-build-static-assets_37fc_{{checksum ".buildcache/cache-keys/build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f"}}
          - cache002-build-ui_c937_{{checksum ".buildcache/cache-keys/build-ui-c937a082f8421679ff11d63348e19af07f067cbb"}}
          - cache002-ui-dependencies_7435_{{checksum ".buildcache/cache-keys/ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1"}}
          - cache002-install-yarn_926d_{{checksum ".buildcache/cache-keys/install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3"}}
          - cache002-set-workdir_cde3_{{checksum ".buildcache/cache-keys/set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde"}}
          - cache002-install-go-tools_32c4_{{checksum ".buildcache/cache-keys/install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996"}}
          - cache002-install-go_1f0b_{{checksum ".buildcache/cache-keys/install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-d6891a70bde266011da4cc2735bcbb7f3fc9902a-{{checksum ".buildcache/cache-keys/package-d6891a70bde266011da4cc2735bcbb7f3fc9902a"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-d64f505f58203dc7743b7ccbe9efe6d97d7ffa70.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-d64f505f58203dc7743b7ccbe9efe6d97d7ffa70-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_d64f_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-d64f505f58203dc7743b7ccbe9efe6d97d7ffa70"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-d64f505f58203dc7743b7ccbe9efe6d97d7ffa70.tar.gz

  netbsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 4ad42bb47a826e91ee070a7bbce756138e210bd2
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-4ad42bb47a826e91ee070a7bbce756138e210bd2-{{checksum ".buildcache/cache-keys/package-4ad42bb47a826e91ee070a7bbce756138e210bd2"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_3fe9_{{checksum ".buildcache/cache-keys/copy-source-3fe9850b7446f77d13ce552a2e8542ee62c33aff"}}
          - cache002-warm-go-build-vendor-cache_0b1b_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-0b1b413ae4dd129d533a9b7f3e16c5a02615e819"}}
          - cache002-build-static-assets_37fc_{{checksum ".buildcache/cache-keys/build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f"}}
          - cache002-build-ui_c937_{{checksum ".buildcache/cache-keys/build-ui-c937a082f8421679ff11d63348e19af07f067cbb"}}
          - cache002-ui-dependencies_7435_{{checksum ".buildcache/cache-keys/ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1"}}
          - cache002-install-yarn_926d_{{checksum ".buildcache/cache-keys/install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3"}}
          - cache002-set-workdir_cde3_{{checksum ".buildcache/cache-keys/set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde"}}
          - cache002-install-go-tools_32c4_{{checksum ".buildcache/cache-keys/install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996"}}
          - cache002-install-go_1f0b_{{checksum ".buildcache/cache-keys/install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-4ad42bb47a826e91ee070a7bbce756138e210bd2-{{checksum ".buildcache/cache-keys/package-4ad42bb47a826e91ee070a7bbce756138e210bd2"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-0b1b413ae4dd129d533a9b7f3e16c5a02615e819.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-0b1b413ae4dd129d533a9b7f3e16c5a02615e819-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_0b1b_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-0b1b413ae4dd129d533a9b7f3e16c5a02615e819"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-0b1b413ae4dd129d533a9b7f3e16c5a02615e819.tar.gz

  netbsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 38009e39ed23d1894080f4d3b9b9b525325a4451
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-38009e39ed23d1894080f4d3b9b9b525325a4451-{{checksum ".buildcache/cache-keys/package-38009e39ed23d1894080f4d3b9b9b525325a4451"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_0d1e_{{checksum ".buildcache/cache-keys/copy-source-0d1ef620eef4d74fc1a4ec3eb3e8e2328e22f240"}}
          - cache002-warm-go-build-vendor-cache_cbcd_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-cbcd087e6eae3cb4435afda8cfb91d880616ad93"}}
          - cache002-build-static-assets_37fc_{{checksum ".buildcache/cache-keys/build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f"}}
          - cache002-build-ui_c937_{{checksum ".buildcache/cache-keys/build-ui-c937a082f8421679ff11d63348e19af07f067cbb"}}
          - cache002-ui-dependencies_7435_{{checksum ".buildcache/cache-keys/ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1"}}
          - cache002-install-yarn_926d_{{checksum ".buildcache/cache-keys/install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3"}}
          - cache002-set-workdir_cde3_{{checksum ".buildcache/cache-keys/set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde"}}
          - cache002-install-go-tools_32c4_{{checksum ".buildcache/cache-keys/install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996"}}
          - cache002-install-go_1f0b_{{checksum ".buildcache/cache-keys/install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-38009e39ed23d1894080f4d3b9b9b525325a4451-{{checksum ".buildcache/cache-keys/package-38009e39ed23d1894080f4d3b9b9b525325a4451"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-cbcd087e6eae3cb4435afda8cfb91d880616ad93.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-cbcd087e6eae3cb4435afda8cfb91d880616ad93-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_cbcd_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-cbcd087e6eae3cb4435afda8cfb91d880616ad93"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-cbcd087e6eae3cb4435afda8cfb91d880616ad93.tar.gz

  openbsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 42087304e739cf2bd8f6fb3ad329fc6610d7716e
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-42087304e739cf2bd8f6fb3ad329fc6610d7716e-{{checksum ".buildcache/cache-keys/package-42087304e739cf2bd8f6fb3ad329fc6610d7716e"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_32b7_{{checksum ".buildcache/cache-keys/copy-source-32b7ec4cbd63b4306c697fafbddd972c89ce5c96"}}
          - cache002-warm-go-build-vendor-cache_86df_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-86dfb1ff0237ad460b5103bc94ea492534886968"}}
          - cache002-build-static-assets_37fc_{{checksum ".buildcache/cache-keys/build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f"}}
          - cache002-build-ui_c937_{{checksum ".buildcache/cache-keys/build-ui-c937a082f8421679ff11d63348e19af07f067cbb"}}
          - cache002-ui-dependencies_7435_{{checksum ".buildcache/cache-keys/ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1"}}
          - cache002-install-yarn_926d_{{checksum ".buildcache/cache-keys/install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3"}}
          - cache002-set-workdir_cde3_{{checksum ".buildcache/cache-keys/set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde"}}
          - cache002-install-go-tools_32c4_{{checksum ".buildcache/cache-keys/install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996"}}
          - cache002-install-go_1f0b_{{checksum ".buildcache/cache-keys/install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-42087304e739cf2bd8f6fb3ad329fc6610d7716e-{{checksum ".buildcache/cache-keys/package-42087304e739cf2bd8f6fb3ad329fc6610d7716e"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-86dfb1ff0237ad460b5103bc94ea492534886968.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-86dfb1ff0237ad460b5103bc94ea492534886968-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_86df_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-86dfb1ff0237ad460b5103bc94ea492534886968"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-86dfb1ff0237ad460b5103bc94ea492534886968.tar.gz

  openbsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 83b043fda03e9cbb233fd35c542f68181123a338
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-83b043fda03e9cbb233fd35c542f68181123a338-{{checksum ".buildcache/cache-keys/package-83b043fda03e9cbb233fd35c542f68181123a338"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_4ec8_{{checksum ".buildcache/cache-keys/copy-source-4ec83029d848b5e83b0bfd1e02d7abfa3aeb7f07"}}
          - cache002-warm-go-build-vendor-cache_c527_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-c527cf1b7a7cc2aa114a0e1220759863afdc21f9"}}
          - cache002-build-static-assets_37fc_{{checksum ".buildcache/cache-keys/build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f"}}
          - cache002-build-ui_c937_{{checksum ".buildcache/cache-keys/build-ui-c937a082f8421679ff11d63348e19af07f067cbb"}}
          - cache002-ui-dependencies_7435_{{checksum ".buildcache/cache-keys/ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1"}}
          - cache002-install-yarn_926d_{{checksum ".buildcache/cache-keys/install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3"}}
          - cache002-set-workdir_cde3_{{checksum ".buildcache/cache-keys/set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde"}}
          - cache002-install-go-tools_32c4_{{checksum ".buildcache/cache-keys/install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996"}}
          - cache002-install-go_1f0b_{{checksum ".buildcache/cache-keys/install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-83b043fda03e9cbb233fd35c542f68181123a338-{{checksum ".buildcache/cache-keys/package-83b043fda03e9cbb233fd35c542f68181123a338"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-c527cf1b7a7cc2aa114a0e1220759863afdc21f9.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-c527cf1b7a7cc2aa114a0e1220759863afdc21f9-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_c527_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-c527cf1b7a7cc2aa114a0e1220759863afdc21f9"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-c527cf1b7a7cc2aa114a0e1220759863afdc21f9.tar.gz

  solaris_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 2660e05b5e27dba494abd5f547aff4df78088500
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-2660e05b5e27dba494abd5f547aff4df78088500-{{checksum ".buildcache/cache-keys/package-2660e05b5e27dba494abd5f547aff4df78088500"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_5fca_{{checksum ".buildcache/cache-keys/copy-source-5fca6ed551271f94d85d09cf5579ad15da9ebad1"}}
          - cache002-warm-go-build-vendor-cache_4852_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-485200b4d5fc3793e27bfe35adda2c10d23074d6"}}
          - cache002-build-static-assets_37fc_{{checksum ".buildcache/cache-keys/build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f"}}
          - cache002-build-ui_c937_{{checksum ".buildcache/cache-keys/build-ui-c937a082f8421679ff11d63348e19af07f067cbb"}}
          - cache002-ui-dependencies_7435_{{checksum ".buildcache/cache-keys/ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1"}}
          - cache002-install-yarn_926d_{{checksum ".buildcache/cache-keys/install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3"}}
          - cache002-set-workdir_cde3_{{checksum ".buildcache/cache-keys/set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde"}}
          - cache002-install-go-tools_32c4_{{checksum ".buildcache/cache-keys/install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996"}}
          - cache002-install-go_1f0b_{{checksum ".buildcache/cache-keys/install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-2660e05b5e27dba494abd5f547aff4df78088500-{{checksum ".buildcache/cache-keys/package-2660e05b5e27dba494abd5f547aff4df78088500"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-485200b4d5fc3793e27bfe35adda2c10d23074d6.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-485200b4d5fc3793e27bfe35adda2c10d23074d6-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_4852_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-485200b4d5fc3793e27bfe35adda2c10d23074d6"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-485200b4d5fc3793e27bfe35adda2c10d23074d6.tar.gz

  windows_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 3e51dd9bea08641ddd94bf08e9ddc648804f0c30
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-3e51dd9bea08641ddd94bf08e9ddc648804f0c30-{{checksum ".buildcache/cache-keys/package-3e51dd9bea08641ddd94bf08e9ddc648804f0c30"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_6898_{{checksum ".buildcache/cache-keys/copy-source-68982bd555002df1fc3f1d78bfd4dadd680e1f74"}}
          - cache002-warm-go-build-vendor-cache_97d8_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-97d8e468815428d63f0db327c2d2d15bf8d600c1"}}
          - cache002-build-static-assets_37fc_{{checksum ".buildcache/cache-keys/build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f"}}
          - cache002-build-ui_c937_{{checksum ".buildcache/cache-keys/build-ui-c937a082f8421679ff11d63348e19af07f067cbb"}}
          - cache002-ui-dependencies_7435_{{checksum ".buildcache/cache-keys/ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1"}}
          - cache002-install-yarn_926d_{{checksum ".buildcache/cache-keys/install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3"}}
          - cache002-set-workdir_cde3_{{checksum ".buildcache/cache-keys/set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde"}}
          - cache002-install-go-tools_32c4_{{checksum ".buildcache/cache-keys/install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996"}}
          - cache002-install-go_1f0b_{{checksum ".buildcache/cache-keys/install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-3e51dd9bea08641ddd94bf08e9ddc648804f0c30-{{checksum ".buildcache/cache-keys/package-3e51dd9bea08641ddd94bf08e9ddc648804f0c30"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-97d8e468815428d63f0db327c2d2d15bf8d600c1.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-97d8e468815428d63f0db327c2d2d15bf8d600c1-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_97d8_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-97d8e468815428d63f0db327c2d2d15bf8d600c1"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-97d8e468815428d63f0db327c2d2d15bf8d600c1.tar.gz

  windows_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: cd5e8adb2257dc0fa01f3982aa77f90f1dfaea7c
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-cd5e8adb2257dc0fa01f3982aa77f90f1dfaea7c-{{checksum ".buildcache/cache-keys/package-cd5e8adb2257dc0fa01f3982aa77f90f1dfaea7c"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_3a97_{{checksum ".buildcache/cache-keys/copy-source-3a97d801ad15159d330a8b578ce47144b914f9b0"}}
          - cache002-warm-go-build-vendor-cache_04d0_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-04d0377562d9376985441bc73e3064a39f9c4ea7"}}
          - cache002-build-static-assets_37fc_{{checksum ".buildcache/cache-keys/build-static-assets-37fcf9b89e236b803d4b54d4bfc90a10c94fd90f"}}
          - cache002-build-ui_c937_{{checksum ".buildcache/cache-keys/build-ui-c937a082f8421679ff11d63348e19af07f067cbb"}}
          - cache002-ui-dependencies_7435_{{checksum ".buildcache/cache-keys/ui-dependencies-74355bfc4a2485bc9635cb14e6b4384ec2402ff1"}}
          - cache002-install-yarn_926d_{{checksum ".buildcache/cache-keys/install-yarn-926d08522d2e0758f1808520531fb88e2a2a80c3"}}
          - cache002-set-workdir_cde3_{{checksum ".buildcache/cache-keys/set-workdir-cde3b254c7b2986a522b8ebf62a410edc11a7dde"}}
          - cache002-install-go-tools_32c4_{{checksum ".buildcache/cache-keys/install-go-tools-32c4e96435aa4be09df02e8d8dc1d32b466a5996"}}
          - cache002-install-go_1f0b_{{checksum ".buildcache/cache-keys/install-go-1f0b9b3d25847234b7d61e4660544bd8cf29beca"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-cd5e8adb2257dc0fa01f3982aa77f90f1dfaea7c-{{checksum ".buildcache/cache-keys/package-cd5e8adb2257dc0fa01f3982aa77f90f1dfaea7c"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-04d0377562d9376985441bc73e3064a39f9c4ea7.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-04d0377562d9376985441bc73e3064a39f9c4ea7-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_04d0_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-04d0377562d9376985441bc73e3064a39f9c4ea7"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-04d0377562d9376985441bc73e3064a39f9c4ea7.tar.gz


  bundle-releases:
    executor: releaser
    steps:
      - checkout
      - write-all-package-cache-keys
      - load-darwin_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 83a92882e8b9793347a81a5e7d8aa9ea8c3695cd
          name: Write package metadata for darwin_386_package
          command: |
            make package-meta
      - load-darwin_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 35387dba3e323c26b914c969c71ca357f2276f1d
          name: Write package metadata for darwin_amd64_package
          command: |
            make package-meta
      - load-freebsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 4eaeb7690739ba4d6789bf85c1051fca7754425f
          name: Write package metadata for freebsd_386_package
          command: |
            make package-meta
      - load-freebsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: ce0e61edc2eb4040ee1cb17abb9eabfcaa1401b1
          name: Write package metadata for freebsd_amd64_package
          command: |
            make package-meta
      - load-freebsd_arm_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 9211399fb35e6c59706319c732f918d73f15d866
          name: Write package metadata for freebsd_arm_package
          command: |
            make package-meta
      - load-linux_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 089be6329b5546be0473ea4c309750317c22e74e
          name: Write package metadata for linux_386_package
          command: |
            make package-meta
      - load-linux_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 6f389fc309f1f1d500043bad3ef8b9728cb11628
          name: Write package metadata for linux_amd64_package
          command: |
            make package-meta
      - load-linux_arm_package
      - run:
          environment:
            PACKAGE_SPEC_ID: f5be59f5c5705844f9dfaa248fe4e3e1abb67e3c
          name: Write package metadata for linux_arm_package
          command: |
            make package-meta
      - load-linux_arm64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: d6891a70bde266011da4cc2735bcbb7f3fc9902a
          name: Write package metadata for linux_arm64_package
          command: |
            make package-meta
      - load-netbsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 4ad42bb47a826e91ee070a7bbce756138e210bd2
          name: Write package metadata for netbsd_386_package
          command: |
            make package-meta
      - load-netbsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 38009e39ed23d1894080f4d3b9b9b525325a4451
          name: Write package metadata for netbsd_amd64_package
          command: |
            make package-meta
      - load-openbsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 42087304e739cf2bd8f6fb3ad329fc6610d7716e
          name: Write package metadata for openbsd_386_package
          command: |
            make package-meta
      - load-openbsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 83b043fda03e9cbb233fd35c542f68181123a338
          name: Write package metadata for openbsd_amd64_package
          command: |
            make package-meta
      - load-solaris_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 2660e05b5e27dba494abd5f547aff4df78088500
          name: Write package metadata for solaris_amd64_package
          command: |
            make package-meta
      - load-windows_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 3e51dd9bea08641ddd94bf08e9ddc648804f0c30
          name: Write package metadata for windows_386_package
          command: |
            make package-meta
      - load-windows_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: cd5e8adb2257dc0fa01f3982aa77f90f1dfaea7c
          name: Write package metadata for windows_amd64_package
          command: |
            make package-meta
      - run:
          name: Write package aliases
          command:
            make aliases
      - run:
          name: List Build Cache
          command: ls -lahR .buildcache

      # Surface the package store directory as an artifact.
      # This makes each zipped package separately downloadable.
      - store_artifacts:
          path: .buildcache/packages
          destination: packages-dfb88dd7ada1aeb33e0d5dbd8aa31240cb3d7056-1b63df3151c4231f

      # Surface a tarball of the whole package store as an artifact.
      - run: tar -czf packages-dfb88dd7ada1aeb33e0d5dbd8aa31240cb3d7056-1b63df3151c4231f.tar.gz .buildcache/packages
      - store_artifacts:
          path: packages-dfb88dd7ada1aeb33e0d5dbd8aa31240cb3d7056-1b63df3151c4231f.tar.gz
          destination: packages-dfb88dd7ada1aeb33e0d5dbd8aa31240cb3d7056-1b63df3151c4231f.tar.gz

      # Surface a tarball of just the metadata files.
      - run: tar -czf meta-dfb88dd7ada1aeb33e0d5dbd8aa31240cb3d7056-1b63df3151c4231f.tar.gz .buildcache/packages/store/*.json
      - store_artifacts:
          path: meta-dfb88dd7ada1aeb33e0d5dbd8aa31240cb3d7056-1b63df3151c4231f.tar.gz
          destination: meta-dfb88dd7ada1aeb33e0d5dbd8aa31240cb3d7056-1b63df3151c4231f.tar.gz

commands:
  load-darwin_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-83a92882e8b9793347a81a5e7d8aa9ea8c3695cd-{{checksum ".buildcache/cache-keys/package-83a92882e8b9793347a81a5e7d8aa9ea8c3695cd"}}'
  
  load-darwin_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-35387dba3e323c26b914c969c71ca357f2276f1d-{{checksum ".buildcache/cache-keys/package-35387dba3e323c26b914c969c71ca357f2276f1d"}}'
  
  load-freebsd_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-4eaeb7690739ba4d6789bf85c1051fca7754425f-{{checksum ".buildcache/cache-keys/package-4eaeb7690739ba4d6789bf85c1051fca7754425f"}}'
  
  load-freebsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-ce0e61edc2eb4040ee1cb17abb9eabfcaa1401b1-{{checksum ".buildcache/cache-keys/package-ce0e61edc2eb4040ee1cb17abb9eabfcaa1401b1"}}'
  
  load-freebsd_arm_package:
    steps:
      - restore_cache:
          key: 'cache002-package-9211399fb35e6c59706319c732f918d73f15d866-{{checksum ".buildcache/cache-keys/package-9211399fb35e6c59706319c732f918d73f15d866"}}'
  
  load-linux_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-089be6329b5546be0473ea4c309750317c22e74e-{{checksum ".buildcache/cache-keys/package-089be6329b5546be0473ea4c309750317c22e74e"}}'
  
  load-linux_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-6f389fc309f1f1d500043bad3ef8b9728cb11628-{{checksum ".buildcache/cache-keys/package-6f389fc309f1f1d500043bad3ef8b9728cb11628"}}'
  
  load-linux_arm_package:
    steps:
      - restore_cache:
          key: 'cache002-package-f5be59f5c5705844f9dfaa248fe4e3e1abb67e3c-{{checksum ".buildcache/cache-keys/package-f5be59f5c5705844f9dfaa248fe4e3e1abb67e3c"}}'
  
  load-linux_arm64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-d6891a70bde266011da4cc2735bcbb7f3fc9902a-{{checksum ".buildcache/cache-keys/package-d6891a70bde266011da4cc2735bcbb7f3fc9902a"}}'
  
  load-netbsd_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-4ad42bb47a826e91ee070a7bbce756138e210bd2-{{checksum ".buildcache/cache-keys/package-4ad42bb47a826e91ee070a7bbce756138e210bd2"}}'
  
  load-netbsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-38009e39ed23d1894080f4d3b9b9b525325a4451-{{checksum ".buildcache/cache-keys/package-38009e39ed23d1894080f4d3b9b9b525325a4451"}}'
  
  load-openbsd_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-42087304e739cf2bd8f6fb3ad329fc6610d7716e-{{checksum ".buildcache/cache-keys/package-42087304e739cf2bd8f6fb3ad329fc6610d7716e"}}'
  
  load-openbsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-83b043fda03e9cbb233fd35c542f68181123a338-{{checksum ".buildcache/cache-keys/package-83b043fda03e9cbb233fd35c542f68181123a338"}}'
  
  load-solaris_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-2660e05b5e27dba494abd5f547aff4df78088500-{{checksum ".buildcache/cache-keys/package-2660e05b5e27dba494abd5f547aff4df78088500"}}'
  
  load-windows_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-3e51dd9bea08641ddd94bf08e9ddc648804f0c30-{{checksum ".buildcache/cache-keys/package-3e51dd9bea08641ddd94bf08e9ddc648804f0c30"}}'
  
  load-windows_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-cd5e8adb2257dc0fa01f3982aa77f90f1dfaea7c-{{checksum ".buildcache/cache-keys/package-cd5e8adb2257dc0fa01f3982aa77f90f1dfaea7c"}}'
  

  write-build-layer-cache-keys:
    steps:
      - run:
          name: Write builder layer cache keys
          command: make -C packages*.lock write-builder-cache-keys

  write-package-cache-key:
    steps:
      - run:
          name: Write package cache key
          command: make -C packages*.lock write-package-cache-key

  write-all-package-cache-keys:
    steps:
      - run:
          name: Write package cache key
          command: make -C packages*.lock write-all-package-cache-keys
