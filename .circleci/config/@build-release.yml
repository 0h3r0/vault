### ***
### WARNING: DO NOT manually EDIT or MERGE this file, it is generated by 'make .circleci/config/@build-release.yml'.
### INSTEAD: Edit or merge the source in packages-oss.lock/pkgs.yml .circleci/config/@build-release.yml.tpl then run 'make .circleci/config/@build-release.yml'.
### ***
# Current cache version: cache002

executors:
  releaser:
    docker:
      - image: circleci/buildpack-deps
    environment:
      PRODUCT_REVISION: "6396d6cd8ca8ed6f8fa4bcafc4aed984e7ba3f81"
      AUTO_INSTALL_TOOLS: 'YES'
    shell: /usr/bin/env bash -euo pipefail -c

workflows:
  build-6396d6cd8ca8ed6f8fa4bcafc4aed984e7ba3f81-a62094d1c5ce029:
    jobs:
      - cache-builder-images:
          filters:
            branches:
              only:
                - /build-.*/
                - /ci.*/
      - darwin_386_package: { requires: [ cache-builder-images ] }
      - darwin_amd64_package: { requires: [ cache-builder-images ] }
      - freebsd_386_package: { requires: [ cache-builder-images ] }
      - freebsd_amd64_package: { requires: [ cache-builder-images ] }
      - freebsd_arm_package: { requires: [ cache-builder-images ] }
      - linux_386_package: { requires: [ cache-builder-images ] }
      - linux_amd64_package: { requires: [ cache-builder-images ] }
      - linux_arm_package: { requires: [ cache-builder-images ] }
      - linux_arm64_package: { requires: [ cache-builder-images ] }
      - netbsd_386_package: { requires: [ cache-builder-images ] }
      - netbsd_amd64_package: { requires: [ cache-builder-images ] }
      - openbsd_386_package: { requires: [ cache-builder-images ] }
      - openbsd_amd64_package: { requires: [ cache-builder-images ] }
      - solaris_amd64_package: { requires: [ cache-builder-images ] }
      - windows_386_package: { requires: [ cache-builder-images ] }
      - windows_amd64_package: { requires: [ cache-builder-images ] }
      - bundle-releases:
          requires:
            - darwin_386_package
            - darwin_amd64_package
            - freebsd_386_package
            - freebsd_amd64_package
            - freebsd_arm_package
            - linux_386_package
            - linux_amd64_package
            - linux_arm_package
            - linux_arm64_package
            - netbsd_386_package
            - netbsd_amd64_package
            - openbsd_386_package
            - openbsd_amd64_package
            - solaris_amd64_package
            - windows_386_package
            - windows_amd64_package
jobs:
  cache-builder-images:
    executor: releaser
    steps:
      - setup_remote_docker
      - checkout
      - write-build-layer-cache-keys

      # Load best available cached image.
      - restore_cache:
          keys:
            - cache002-build-static-assets_17f0_{{checksum ".buildcache/cache-keys/build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02"}}
            - cache002-build-ui_0491_{{checksum ".buildcache/cache-keys/build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96"}}
            - cache002-ui-dependencies_9088_{{checksum ".buildcache/cache-keys/ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec"}}
            - cache002-install-yarn_dca6_{{checksum ".buildcache/cache-keys/install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc"}}
            - cache002-set-workdir_7bfe_{{checksum ".buildcache/cache-keys/set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e"}}
            - cache002-install-go-tools_542b_{{checksum ".buildcache/cache-keys/install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b"}}
            - cache002-install-go_0145_{{checksum ".buildcache/cache-keys/install-go-014534755637154212868d8c68f9ed83f3ca75a2"}}
            - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run:
          name: Finish early if loaded exact match from cache.
          command: |
            if [ -f .buildcache/archives/07-build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02.tar.gz ]; then
              echo "Exact match found in cache, skipping build."
              circleci-agent step halt
            else
              echo "No exact match found, proceeding with build."
            fi
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            LAYER_SPEC_ID=07-build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02 make -C packages*.lock load-builder-cache

      # No exact match was found, so build each layer up to target type.
      - run: make -f packages*.lock/layer.mk 00-base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9-image
      - run: make -f packages*.lock/layer.mk 01-install-go-014534755637154212868d8c68f9ed83f3ca75a2-image
      - run: make -f packages*.lock/layer.mk 02-install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b-image
      - run: make -f packages*.lock/layer.mk 03-set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e-image
      - run: make -f packages*.lock/layer.mk 04-install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc-image
      - run: make -f packages*.lock/layer.mk 05-ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec-image
      - run: make -f packages*.lock/layer.mk 06-build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96-image
      - run: make -f packages*.lock/layer.mk 07-build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02-image

      # Save the target layer archive.
      
      - run: make -f packages*.lock/layer.mk 07-build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02-save
      
      # Store the target layer archive as all the relevant cache names.
      - save_cache:
          key: cache002-build-static-assets_17f0_{{checksum ".buildcache/cache-keys/build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02"}}
          paths:
            - .buildcache/archives/07-build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02.tar.gz
      - run: mv .buildcache/archives/07-build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02.tar.gz .buildcache/archives/06-build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96.tar.gz
      - save_cache:
          key: cache002-build-ui_0491_{{checksum ".buildcache/cache-keys/build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96"}}
          paths:
            - .buildcache/archives/06-build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96.tar.gz
      - run: mv .buildcache/archives/06-build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96.tar.gz .buildcache/archives/05-ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec.tar.gz
      - save_cache:
          key: cache002-ui-dependencies_9088_{{checksum ".buildcache/cache-keys/ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec"}}
          paths:
            - .buildcache/archives/05-ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec.tar.gz
      - run: mv .buildcache/archives/05-ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec.tar.gz .buildcache/archives/04-install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc.tar.gz
      - save_cache:
          key: cache002-install-yarn_dca6_{{checksum ".buildcache/cache-keys/install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc"}}
          paths:
            - .buildcache/archives/04-install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc.tar.gz
      - run: mv .buildcache/archives/04-install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc.tar.gz .buildcache/archives/03-set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e.tar.gz
      - save_cache:
          key: cache002-set-workdir_7bfe_{{checksum ".buildcache/cache-keys/set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e"}}
          paths:
            - .buildcache/archives/03-set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e.tar.gz
      - run: mv .buildcache/archives/03-set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e.tar.gz .buildcache/archives/02-install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b.tar.gz
      - save_cache:
          key: cache002-install-go-tools_542b_{{checksum ".buildcache/cache-keys/install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b"}}
          paths:
            - .buildcache/archives/02-install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b.tar.gz
      - run: mv .buildcache/archives/02-install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b.tar.gz .buildcache/archives/01-install-go-014534755637154212868d8c68f9ed83f3ca75a2.tar.gz
      - save_cache:
          key: cache002-install-go_0145_{{checksum ".buildcache/cache-keys/install-go-014534755637154212868d8c68f9ed83f3ca75a2"}}
          paths:
            - .buildcache/archives/01-install-go-014534755637154212868d8c68f9ed83f3ca75a2.tar.gz
      - run: mv .buildcache/archives/01-install-go-014534755637154212868d8c68f9ed83f3ca75a2.tar.gz .buildcache/archives/00-base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9.tar.gz
      - save_cache:
          key: cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
          paths:
            - .buildcache/archives/00-base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9.tar.gz
  darwin_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 08451ad9f4555794e93ba325acf7718d0f9730fc
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-08451ad9f4555794e93ba325acf7718d0f9730fc-{{checksum ".buildcache/cache-keys/package-08451ad9f4555794e93ba325acf7718d0f9730fc"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_a9e9_{{checksum ".buildcache/cache-keys/copy-source-a9e91220f47671a4071c05d4feb5553e96bfa153"}}
          - cache002-warm-go-build-vendor-cache_8ae7_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-8ae7c3bf8ef8a68096a3a09adf754a31c8a5538c"}}
          - cache002-build-static-assets_17f0_{{checksum ".buildcache/cache-keys/build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02"}}
          - cache002-build-ui_0491_{{checksum ".buildcache/cache-keys/build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96"}}
          - cache002-ui-dependencies_9088_{{checksum ".buildcache/cache-keys/ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec"}}
          - cache002-install-yarn_dca6_{{checksum ".buildcache/cache-keys/install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc"}}
          - cache002-set-workdir_7bfe_{{checksum ".buildcache/cache-keys/set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e"}}
          - cache002-install-go-tools_542b_{{checksum ".buildcache/cache-keys/install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b"}}
          - cache002-install-go_0145_{{checksum ".buildcache/cache-keys/install-go-014534755637154212868d8c68f9ed83f3ca75a2"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-08451ad9f4555794e93ba325acf7718d0f9730fc-{{checksum ".buildcache/cache-keys/package-08451ad9f4555794e93ba325acf7718d0f9730fc"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-8ae7c3bf8ef8a68096a3a09adf754a31c8a5538c.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-8ae7c3bf8ef8a68096a3a09adf754a31c8a5538c-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_8ae7_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-8ae7c3bf8ef8a68096a3a09adf754a31c8a5538c"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-8ae7c3bf8ef8a68096a3a09adf754a31c8a5538c.tar.gz

  darwin_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: ce557e05bece60e3c60e1ae5746f830365691fd0
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-ce557e05bece60e3c60e1ae5746f830365691fd0-{{checksum ".buildcache/cache-keys/package-ce557e05bece60e3c60e1ae5746f830365691fd0"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_5919_{{checksum ".buildcache/cache-keys/copy-source-591970fb8757504a0a1f3f78cb87c8f940856748"}}
          - cache002-warm-go-build-vendor-cache_0989_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-0989cfb619cecce2ff1b695720b15ddb0690c90c"}}
          - cache002-build-static-assets_17f0_{{checksum ".buildcache/cache-keys/build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02"}}
          - cache002-build-ui_0491_{{checksum ".buildcache/cache-keys/build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96"}}
          - cache002-ui-dependencies_9088_{{checksum ".buildcache/cache-keys/ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec"}}
          - cache002-install-yarn_dca6_{{checksum ".buildcache/cache-keys/install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc"}}
          - cache002-set-workdir_7bfe_{{checksum ".buildcache/cache-keys/set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e"}}
          - cache002-install-go-tools_542b_{{checksum ".buildcache/cache-keys/install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b"}}
          - cache002-install-go_0145_{{checksum ".buildcache/cache-keys/install-go-014534755637154212868d8c68f9ed83f3ca75a2"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-ce557e05bece60e3c60e1ae5746f830365691fd0-{{checksum ".buildcache/cache-keys/package-ce557e05bece60e3c60e1ae5746f830365691fd0"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-0989cfb619cecce2ff1b695720b15ddb0690c90c.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-0989cfb619cecce2ff1b695720b15ddb0690c90c-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_0989_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-0989cfb619cecce2ff1b695720b15ddb0690c90c"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-0989cfb619cecce2ff1b695720b15ddb0690c90c.tar.gz

  freebsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 6efb3807cccfd636f9184372c8a3e157565dd0d8
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-6efb3807cccfd636f9184372c8a3e157565dd0d8-{{checksum ".buildcache/cache-keys/package-6efb3807cccfd636f9184372c8a3e157565dd0d8"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_18b3_{{checksum ".buildcache/cache-keys/copy-source-18b301eaeb85d415211f5690980d6c248dd479a8"}}
          - cache002-warm-go-build-vendor-cache_3f34_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3f345e3b12790027baa19fbb4fd6894748c5ce88"}}
          - cache002-build-static-assets_17f0_{{checksum ".buildcache/cache-keys/build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02"}}
          - cache002-build-ui_0491_{{checksum ".buildcache/cache-keys/build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96"}}
          - cache002-ui-dependencies_9088_{{checksum ".buildcache/cache-keys/ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec"}}
          - cache002-install-yarn_dca6_{{checksum ".buildcache/cache-keys/install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc"}}
          - cache002-set-workdir_7bfe_{{checksum ".buildcache/cache-keys/set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e"}}
          - cache002-install-go-tools_542b_{{checksum ".buildcache/cache-keys/install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b"}}
          - cache002-install-go_0145_{{checksum ".buildcache/cache-keys/install-go-014534755637154212868d8c68f9ed83f3ca75a2"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-6efb3807cccfd636f9184372c8a3e157565dd0d8-{{checksum ".buildcache/cache-keys/package-6efb3807cccfd636f9184372c8a3e157565dd0d8"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-3f345e3b12790027baa19fbb4fd6894748c5ce88.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-3f345e3b12790027baa19fbb4fd6894748c5ce88-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_3f34_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3f345e3b12790027baa19fbb4fd6894748c5ce88"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-3f345e3b12790027baa19fbb4fd6894748c5ce88.tar.gz

  freebsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 4f100621009e6e24aed1ad734ff953c593000f5b
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-4f100621009e6e24aed1ad734ff953c593000f5b-{{checksum ".buildcache/cache-keys/package-4f100621009e6e24aed1ad734ff953c593000f5b"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_2034_{{checksum ".buildcache/cache-keys/copy-source-203479dad34a7f81c9387670f225eb15084167cf"}}
          - cache002-warm-go-build-vendor-cache_bde5_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-bde56cf36fac415a67f79a8d837c2472a7a6d7dc"}}
          - cache002-build-static-assets_17f0_{{checksum ".buildcache/cache-keys/build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02"}}
          - cache002-build-ui_0491_{{checksum ".buildcache/cache-keys/build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96"}}
          - cache002-ui-dependencies_9088_{{checksum ".buildcache/cache-keys/ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec"}}
          - cache002-install-yarn_dca6_{{checksum ".buildcache/cache-keys/install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc"}}
          - cache002-set-workdir_7bfe_{{checksum ".buildcache/cache-keys/set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e"}}
          - cache002-install-go-tools_542b_{{checksum ".buildcache/cache-keys/install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b"}}
          - cache002-install-go_0145_{{checksum ".buildcache/cache-keys/install-go-014534755637154212868d8c68f9ed83f3ca75a2"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-4f100621009e6e24aed1ad734ff953c593000f5b-{{checksum ".buildcache/cache-keys/package-4f100621009e6e24aed1ad734ff953c593000f5b"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-bde56cf36fac415a67f79a8d837c2472a7a6d7dc.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-bde56cf36fac415a67f79a8d837c2472a7a6d7dc-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_bde5_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-bde56cf36fac415a67f79a8d837c2472a7a6d7dc"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-bde56cf36fac415a67f79a8d837c2472a7a6d7dc.tar.gz

  freebsd_arm_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: d769ae2de574ca68bec8c176139feb4a784d5268
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-d769ae2de574ca68bec8c176139feb4a784d5268-{{checksum ".buildcache/cache-keys/package-d769ae2de574ca68bec8c176139feb4a784d5268"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_b861_{{checksum ".buildcache/cache-keys/copy-source-b861ba63896f5db897a0e3d40280541150bd1a7b"}}
          - cache002-warm-go-build-vendor-cache_3f16_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3f163e07b796e926ab51f2c410c3db96db3acb8f"}}
          - cache002-build-static-assets_17f0_{{checksum ".buildcache/cache-keys/build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02"}}
          - cache002-build-ui_0491_{{checksum ".buildcache/cache-keys/build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96"}}
          - cache002-ui-dependencies_9088_{{checksum ".buildcache/cache-keys/ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec"}}
          - cache002-install-yarn_dca6_{{checksum ".buildcache/cache-keys/install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc"}}
          - cache002-set-workdir_7bfe_{{checksum ".buildcache/cache-keys/set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e"}}
          - cache002-install-go-tools_542b_{{checksum ".buildcache/cache-keys/install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b"}}
          - cache002-install-go_0145_{{checksum ".buildcache/cache-keys/install-go-014534755637154212868d8c68f9ed83f3ca75a2"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-d769ae2de574ca68bec8c176139feb4a784d5268-{{checksum ".buildcache/cache-keys/package-d769ae2de574ca68bec8c176139feb4a784d5268"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-3f163e07b796e926ab51f2c410c3db96db3acb8f.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-3f163e07b796e926ab51f2c410c3db96db3acb8f-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_3f16_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3f163e07b796e926ab51f2c410c3db96db3acb8f"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-3f163e07b796e926ab51f2c410c3db96db3acb8f.tar.gz

  linux_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: ab09323e23fed3a7e5eacc1fa475b6f5a3ba7f0f
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-ab09323e23fed3a7e5eacc1fa475b6f5a3ba7f0f-{{checksum ".buildcache/cache-keys/package-ab09323e23fed3a7e5eacc1fa475b6f5a3ba7f0f"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_c9f4_{{checksum ".buildcache/cache-keys/copy-source-c9f48e93d2e37c92159dbdbe042c7767d11317ce"}}
          - cache002-warm-go-build-vendor-cache_4d9b_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-4d9b3508473bf957bdeb3252af9c711bec8840aa"}}
          - cache002-build-static-assets_17f0_{{checksum ".buildcache/cache-keys/build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02"}}
          - cache002-build-ui_0491_{{checksum ".buildcache/cache-keys/build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96"}}
          - cache002-ui-dependencies_9088_{{checksum ".buildcache/cache-keys/ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec"}}
          - cache002-install-yarn_dca6_{{checksum ".buildcache/cache-keys/install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc"}}
          - cache002-set-workdir_7bfe_{{checksum ".buildcache/cache-keys/set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e"}}
          - cache002-install-go-tools_542b_{{checksum ".buildcache/cache-keys/install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b"}}
          - cache002-install-go_0145_{{checksum ".buildcache/cache-keys/install-go-014534755637154212868d8c68f9ed83f3ca75a2"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-ab09323e23fed3a7e5eacc1fa475b6f5a3ba7f0f-{{checksum ".buildcache/cache-keys/package-ab09323e23fed3a7e5eacc1fa475b6f5a3ba7f0f"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-4d9b3508473bf957bdeb3252af9c711bec8840aa.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-4d9b3508473bf957bdeb3252af9c711bec8840aa-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_4d9b_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-4d9b3508473bf957bdeb3252af9c711bec8840aa"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-4d9b3508473bf957bdeb3252af9c711bec8840aa.tar.gz

  linux_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 6fa6afe4298bb9dd09de4541c08730ec076178d4
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-6fa6afe4298bb9dd09de4541c08730ec076178d4-{{checksum ".buildcache/cache-keys/package-6fa6afe4298bb9dd09de4541c08730ec076178d4"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_21ce_{{checksum ".buildcache/cache-keys/copy-source-21cedcd133a779eac130ef66a139bbd0bf70b2c6"}}
          - cache002-warm-go-build-vendor-cache_13cd_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-13cd4c25bd0a10100846ee134e20810d525b7e3f"}}
          - cache002-build-static-assets_17f0_{{checksum ".buildcache/cache-keys/build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02"}}
          - cache002-build-ui_0491_{{checksum ".buildcache/cache-keys/build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96"}}
          - cache002-ui-dependencies_9088_{{checksum ".buildcache/cache-keys/ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec"}}
          - cache002-install-yarn_dca6_{{checksum ".buildcache/cache-keys/install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc"}}
          - cache002-set-workdir_7bfe_{{checksum ".buildcache/cache-keys/set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e"}}
          - cache002-install-go-tools_542b_{{checksum ".buildcache/cache-keys/install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b"}}
          - cache002-install-go_0145_{{checksum ".buildcache/cache-keys/install-go-014534755637154212868d8c68f9ed83f3ca75a2"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-6fa6afe4298bb9dd09de4541c08730ec076178d4-{{checksum ".buildcache/cache-keys/package-6fa6afe4298bb9dd09de4541c08730ec076178d4"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-13cd4c25bd0a10100846ee134e20810d525b7e3f.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-13cd4c25bd0a10100846ee134e20810d525b7e3f-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_13cd_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-13cd4c25bd0a10100846ee134e20810d525b7e3f"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-13cd4c25bd0a10100846ee134e20810d525b7e3f.tar.gz

  linux_arm_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 7f9eb95045b256584d638f405c4af47000b5756f
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-7f9eb95045b256584d638f405c4af47000b5756f-{{checksum ".buildcache/cache-keys/package-7f9eb95045b256584d638f405c4af47000b5756f"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_9f47_{{checksum ".buildcache/cache-keys/copy-source-9f479829dace26b3ecbe5ea098e51e0d4a2e0701"}}
          - cache002-warm-go-build-vendor-cache_b849_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-b8498cd907a23efd957641dda530548e03fa2581"}}
          - cache002-build-static-assets_17f0_{{checksum ".buildcache/cache-keys/build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02"}}
          - cache002-build-ui_0491_{{checksum ".buildcache/cache-keys/build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96"}}
          - cache002-ui-dependencies_9088_{{checksum ".buildcache/cache-keys/ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec"}}
          - cache002-install-yarn_dca6_{{checksum ".buildcache/cache-keys/install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc"}}
          - cache002-set-workdir_7bfe_{{checksum ".buildcache/cache-keys/set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e"}}
          - cache002-install-go-tools_542b_{{checksum ".buildcache/cache-keys/install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b"}}
          - cache002-install-go_0145_{{checksum ".buildcache/cache-keys/install-go-014534755637154212868d8c68f9ed83f3ca75a2"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-7f9eb95045b256584d638f405c4af47000b5756f-{{checksum ".buildcache/cache-keys/package-7f9eb95045b256584d638f405c4af47000b5756f"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-b8498cd907a23efd957641dda530548e03fa2581.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-b8498cd907a23efd957641dda530548e03fa2581-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_b849_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-b8498cd907a23efd957641dda530548e03fa2581"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-b8498cd907a23efd957641dda530548e03fa2581.tar.gz

  linux_arm64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: c376c87c5ee6645bdb52ad82f17cc20dc259d584
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-c376c87c5ee6645bdb52ad82f17cc20dc259d584-{{checksum ".buildcache/cache-keys/package-c376c87c5ee6645bdb52ad82f17cc20dc259d584"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_e1a0_{{checksum ".buildcache/cache-keys/copy-source-e1a0138b3a9ad6372566f34066bc1b8eef557a8d"}}
          - cache002-warm-go-build-vendor-cache_8f78_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-8f78a9cb29a4b62c0265e82adae6653016031563"}}
          - cache002-build-static-assets_17f0_{{checksum ".buildcache/cache-keys/build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02"}}
          - cache002-build-ui_0491_{{checksum ".buildcache/cache-keys/build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96"}}
          - cache002-ui-dependencies_9088_{{checksum ".buildcache/cache-keys/ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec"}}
          - cache002-install-yarn_dca6_{{checksum ".buildcache/cache-keys/install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc"}}
          - cache002-set-workdir_7bfe_{{checksum ".buildcache/cache-keys/set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e"}}
          - cache002-install-go-tools_542b_{{checksum ".buildcache/cache-keys/install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b"}}
          - cache002-install-go_0145_{{checksum ".buildcache/cache-keys/install-go-014534755637154212868d8c68f9ed83f3ca75a2"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-c376c87c5ee6645bdb52ad82f17cc20dc259d584-{{checksum ".buildcache/cache-keys/package-c376c87c5ee6645bdb52ad82f17cc20dc259d584"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-8f78a9cb29a4b62c0265e82adae6653016031563.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-8f78a9cb29a4b62c0265e82adae6653016031563-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_8f78_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-8f78a9cb29a4b62c0265e82adae6653016031563"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-8f78a9cb29a4b62c0265e82adae6653016031563.tar.gz

  netbsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: edf9b6f8a4c6ccfa11af88c5b12cbfc7ef546cca
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-edf9b6f8a4c6ccfa11af88c5b12cbfc7ef546cca-{{checksum ".buildcache/cache-keys/package-edf9b6f8a4c6ccfa11af88c5b12cbfc7ef546cca"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_7e49_{{checksum ".buildcache/cache-keys/copy-source-7e495cb556a47b30be9ad9b35197810fb936e9a1"}}
          - cache002-warm-go-build-vendor-cache_a949_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-a94949f13bcf9b719e080f139a141efb0f9b1c7f"}}
          - cache002-build-static-assets_17f0_{{checksum ".buildcache/cache-keys/build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02"}}
          - cache002-build-ui_0491_{{checksum ".buildcache/cache-keys/build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96"}}
          - cache002-ui-dependencies_9088_{{checksum ".buildcache/cache-keys/ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec"}}
          - cache002-install-yarn_dca6_{{checksum ".buildcache/cache-keys/install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc"}}
          - cache002-set-workdir_7bfe_{{checksum ".buildcache/cache-keys/set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e"}}
          - cache002-install-go-tools_542b_{{checksum ".buildcache/cache-keys/install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b"}}
          - cache002-install-go_0145_{{checksum ".buildcache/cache-keys/install-go-014534755637154212868d8c68f9ed83f3ca75a2"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-edf9b6f8a4c6ccfa11af88c5b12cbfc7ef546cca-{{checksum ".buildcache/cache-keys/package-edf9b6f8a4c6ccfa11af88c5b12cbfc7ef546cca"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-a94949f13bcf9b719e080f139a141efb0f9b1c7f.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-a94949f13bcf9b719e080f139a141efb0f9b1c7f-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_a949_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-a94949f13bcf9b719e080f139a141efb0f9b1c7f"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-a94949f13bcf9b719e080f139a141efb0f9b1c7f.tar.gz

  netbsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: f859668a471c46d8a107343285c513027dc47272
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-f859668a471c46d8a107343285c513027dc47272-{{checksum ".buildcache/cache-keys/package-f859668a471c46d8a107343285c513027dc47272"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_b4e4_{{checksum ".buildcache/cache-keys/copy-source-b4e4edef36b6232086995575b19a16d038b2c073"}}
          - cache002-warm-go-build-vendor-cache_1f24_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-1f24617d135b5aa811375a2ff91594fa0a58020f"}}
          - cache002-build-static-assets_17f0_{{checksum ".buildcache/cache-keys/build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02"}}
          - cache002-build-ui_0491_{{checksum ".buildcache/cache-keys/build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96"}}
          - cache002-ui-dependencies_9088_{{checksum ".buildcache/cache-keys/ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec"}}
          - cache002-install-yarn_dca6_{{checksum ".buildcache/cache-keys/install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc"}}
          - cache002-set-workdir_7bfe_{{checksum ".buildcache/cache-keys/set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e"}}
          - cache002-install-go-tools_542b_{{checksum ".buildcache/cache-keys/install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b"}}
          - cache002-install-go_0145_{{checksum ".buildcache/cache-keys/install-go-014534755637154212868d8c68f9ed83f3ca75a2"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-f859668a471c46d8a107343285c513027dc47272-{{checksum ".buildcache/cache-keys/package-f859668a471c46d8a107343285c513027dc47272"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-1f24617d135b5aa811375a2ff91594fa0a58020f.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-1f24617d135b5aa811375a2ff91594fa0a58020f-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_1f24_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-1f24617d135b5aa811375a2ff91594fa0a58020f"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-1f24617d135b5aa811375a2ff91594fa0a58020f.tar.gz

  openbsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: ef7229fa435507a6b12ec0a04cbb11f8972efaf9
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-ef7229fa435507a6b12ec0a04cbb11f8972efaf9-{{checksum ".buildcache/cache-keys/package-ef7229fa435507a6b12ec0a04cbb11f8972efaf9"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_03d4_{{checksum ".buildcache/cache-keys/copy-source-03d47b9d2a390009fa1925a3e320b804e9683b9b"}}
          - cache002-warm-go-build-vendor-cache_5232_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-523267fdfc24d901a0056306882aecffa3834f2d"}}
          - cache002-build-static-assets_17f0_{{checksum ".buildcache/cache-keys/build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02"}}
          - cache002-build-ui_0491_{{checksum ".buildcache/cache-keys/build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96"}}
          - cache002-ui-dependencies_9088_{{checksum ".buildcache/cache-keys/ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec"}}
          - cache002-install-yarn_dca6_{{checksum ".buildcache/cache-keys/install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc"}}
          - cache002-set-workdir_7bfe_{{checksum ".buildcache/cache-keys/set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e"}}
          - cache002-install-go-tools_542b_{{checksum ".buildcache/cache-keys/install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b"}}
          - cache002-install-go_0145_{{checksum ".buildcache/cache-keys/install-go-014534755637154212868d8c68f9ed83f3ca75a2"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-ef7229fa435507a6b12ec0a04cbb11f8972efaf9-{{checksum ".buildcache/cache-keys/package-ef7229fa435507a6b12ec0a04cbb11f8972efaf9"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-523267fdfc24d901a0056306882aecffa3834f2d.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-523267fdfc24d901a0056306882aecffa3834f2d-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_5232_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-523267fdfc24d901a0056306882aecffa3834f2d"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-523267fdfc24d901a0056306882aecffa3834f2d.tar.gz

  openbsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: ca99965130b0cc8a383e0dc65c509d9a89862fbf
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-ca99965130b0cc8a383e0dc65c509d9a89862fbf-{{checksum ".buildcache/cache-keys/package-ca99965130b0cc8a383e0dc65c509d9a89862fbf"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_332a_{{checksum ".buildcache/cache-keys/copy-source-332a0fa96ec5b88fb188c6ae223f1b87fb6013ab"}}
          - cache002-warm-go-build-vendor-cache_4990_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-499072df3323315f40ab84a5a61fbb24bcce78b0"}}
          - cache002-build-static-assets_17f0_{{checksum ".buildcache/cache-keys/build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02"}}
          - cache002-build-ui_0491_{{checksum ".buildcache/cache-keys/build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96"}}
          - cache002-ui-dependencies_9088_{{checksum ".buildcache/cache-keys/ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec"}}
          - cache002-install-yarn_dca6_{{checksum ".buildcache/cache-keys/install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc"}}
          - cache002-set-workdir_7bfe_{{checksum ".buildcache/cache-keys/set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e"}}
          - cache002-install-go-tools_542b_{{checksum ".buildcache/cache-keys/install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b"}}
          - cache002-install-go_0145_{{checksum ".buildcache/cache-keys/install-go-014534755637154212868d8c68f9ed83f3ca75a2"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-ca99965130b0cc8a383e0dc65c509d9a89862fbf-{{checksum ".buildcache/cache-keys/package-ca99965130b0cc8a383e0dc65c509d9a89862fbf"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-499072df3323315f40ab84a5a61fbb24bcce78b0.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-499072df3323315f40ab84a5a61fbb24bcce78b0-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_4990_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-499072df3323315f40ab84a5a61fbb24bcce78b0"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-499072df3323315f40ab84a5a61fbb24bcce78b0.tar.gz

  solaris_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 8597823a68c14be058118f6fa96e1e289c969d3e
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-8597823a68c14be058118f6fa96e1e289c969d3e-{{checksum ".buildcache/cache-keys/package-8597823a68c14be058118f6fa96e1e289c969d3e"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_eeec_{{checksum ".buildcache/cache-keys/copy-source-eeec771329c729b67f81a4aa15ed39f0683bca29"}}
          - cache002-warm-go-build-vendor-cache_204b_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-204bc0ba78429a5b1595f4ada8dae6fb9ef500ae"}}
          - cache002-build-static-assets_17f0_{{checksum ".buildcache/cache-keys/build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02"}}
          - cache002-build-ui_0491_{{checksum ".buildcache/cache-keys/build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96"}}
          - cache002-ui-dependencies_9088_{{checksum ".buildcache/cache-keys/ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec"}}
          - cache002-install-yarn_dca6_{{checksum ".buildcache/cache-keys/install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc"}}
          - cache002-set-workdir_7bfe_{{checksum ".buildcache/cache-keys/set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e"}}
          - cache002-install-go-tools_542b_{{checksum ".buildcache/cache-keys/install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b"}}
          - cache002-install-go_0145_{{checksum ".buildcache/cache-keys/install-go-014534755637154212868d8c68f9ed83f3ca75a2"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-8597823a68c14be058118f6fa96e1e289c969d3e-{{checksum ".buildcache/cache-keys/package-8597823a68c14be058118f6fa96e1e289c969d3e"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-204bc0ba78429a5b1595f4ada8dae6fb9ef500ae.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-204bc0ba78429a5b1595f4ada8dae6fb9ef500ae-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_204b_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-204bc0ba78429a5b1595f4ada8dae6fb9ef500ae"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-204bc0ba78429a5b1595f4ada8dae6fb9ef500ae.tar.gz

  windows_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 3e4119e14e95b56e99e890332a3a29b9cbb16c3c
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-3e4119e14e95b56e99e890332a3a29b9cbb16c3c-{{checksum ".buildcache/cache-keys/package-3e4119e14e95b56e99e890332a3a29b9cbb16c3c"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_6236_{{checksum ".buildcache/cache-keys/copy-source-62362d77eedc48b0bcc3abbbc99d0fab0ae98b14"}}
          - cache002-warm-go-build-vendor-cache_bf5c_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-bf5c86714acd5f20c83d8dc8e2f10120819582d0"}}
          - cache002-build-static-assets_17f0_{{checksum ".buildcache/cache-keys/build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02"}}
          - cache002-build-ui_0491_{{checksum ".buildcache/cache-keys/build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96"}}
          - cache002-ui-dependencies_9088_{{checksum ".buildcache/cache-keys/ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec"}}
          - cache002-install-yarn_dca6_{{checksum ".buildcache/cache-keys/install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc"}}
          - cache002-set-workdir_7bfe_{{checksum ".buildcache/cache-keys/set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e"}}
          - cache002-install-go-tools_542b_{{checksum ".buildcache/cache-keys/install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b"}}
          - cache002-install-go_0145_{{checksum ".buildcache/cache-keys/install-go-014534755637154212868d8c68f9ed83f3ca75a2"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-3e4119e14e95b56e99e890332a3a29b9cbb16c3c-{{checksum ".buildcache/cache-keys/package-3e4119e14e95b56e99e890332a3a29b9cbb16c3c"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-bf5c86714acd5f20c83d8dc8e2f10120819582d0.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-bf5c86714acd5f20c83d8dc8e2f10120819582d0-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_bf5c_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-bf5c86714acd5f20c83d8dc8e2f10120819582d0"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-bf5c86714acd5f20c83d8dc8e2f10120819582d0.tar.gz

  windows_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 9974f2f0445ee5b41607b8e117a145aef9a85e66
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-9974f2f0445ee5b41607b8e117a145aef9a85e66-{{checksum ".buildcache/cache-keys/package-9974f2f0445ee5b41607b8e117a145aef9a85e66"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_8509_{{checksum ".buildcache/cache-keys/copy-source-850988d4b8310c865e4f8247bf0e8cad1194ba47"}}
          - cache002-warm-go-build-vendor-cache_2c16_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-2c1631ac637c9b8fad628337a8ffd42b5ba704cd"}}
          - cache002-build-static-assets_17f0_{{checksum ".buildcache/cache-keys/build-static-assets-17f0a3ab4e6a7b3ea069ab152af31fa420b05a02"}}
          - cache002-build-ui_0491_{{checksum ".buildcache/cache-keys/build-ui-0491266497e7c9cf7d32ef9175810f736ccdae96"}}
          - cache002-ui-dependencies_9088_{{checksum ".buildcache/cache-keys/ui-dependencies-9088315685424f0f1b4754c2bb5a8d712b6fe5ec"}}
          - cache002-install-yarn_dca6_{{checksum ".buildcache/cache-keys/install-yarn-dca629dd02c16c1625ea34aa0270b0984d1f15dc"}}
          - cache002-set-workdir_7bfe_{{checksum ".buildcache/cache-keys/set-workdir-7bfef9513f6d3e554e5c118f6a8abdfcfd5e106e"}}
          - cache002-install-go-tools_542b_{{checksum ".buildcache/cache-keys/install-go-tools-542b65941ffeac486d4cba44f6ebcaa01e18e99b"}}
          - cache002-install-go_0145_{{checksum ".buildcache/cache-keys/install-go-014534755637154212868d8c68f9ed83f3ca75a2"}}
          - cache002-base_a1d9_{{checksum ".buildcache/cache-keys/base-a1d961bcff31b1cdadaa9422452ba72d8b4a85a9"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-9974f2f0445ee5b41607b8e117a145aef9a85e66-{{checksum ".buildcache/cache-keys/package-9974f2f0445ee5b41607b8e117a145aef9a85e66"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-2c1631ac637c9b8fad628337a8ffd42b5ba704cd.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-2c1631ac637c9b8fad628337a8ffd42b5ba704cd-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_2c16_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-2c1631ac637c9b8fad628337a8ffd42b5ba704cd"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-2c1631ac637c9b8fad628337a8ffd42b5ba704cd.tar.gz


  bundle-releases:
    executor: releaser
    steps:
      - checkout
      - write-all-package-cache-keys
      - load-darwin_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 08451ad9f4555794e93ba325acf7718d0f9730fc
          name: Write package metadata for darwin_386_package
          command: |
            make package-meta
      - load-darwin_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: ce557e05bece60e3c60e1ae5746f830365691fd0
          name: Write package metadata for darwin_amd64_package
          command: |
            make package-meta
      - load-freebsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 6efb3807cccfd636f9184372c8a3e157565dd0d8
          name: Write package metadata for freebsd_386_package
          command: |
            make package-meta
      - load-freebsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 4f100621009e6e24aed1ad734ff953c593000f5b
          name: Write package metadata for freebsd_amd64_package
          command: |
            make package-meta
      - load-freebsd_arm_package
      - run:
          environment:
            PACKAGE_SPEC_ID: d769ae2de574ca68bec8c176139feb4a784d5268
          name: Write package metadata for freebsd_arm_package
          command: |
            make package-meta
      - load-linux_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: ab09323e23fed3a7e5eacc1fa475b6f5a3ba7f0f
          name: Write package metadata for linux_386_package
          command: |
            make package-meta
      - load-linux_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 6fa6afe4298bb9dd09de4541c08730ec076178d4
          name: Write package metadata for linux_amd64_package
          command: |
            make package-meta
      - load-linux_arm_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 7f9eb95045b256584d638f405c4af47000b5756f
          name: Write package metadata for linux_arm_package
          command: |
            make package-meta
      - load-linux_arm64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: c376c87c5ee6645bdb52ad82f17cc20dc259d584
          name: Write package metadata for linux_arm64_package
          command: |
            make package-meta
      - load-netbsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: edf9b6f8a4c6ccfa11af88c5b12cbfc7ef546cca
          name: Write package metadata for netbsd_386_package
          command: |
            make package-meta
      - load-netbsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: f859668a471c46d8a107343285c513027dc47272
          name: Write package metadata for netbsd_amd64_package
          command: |
            make package-meta
      - load-openbsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: ef7229fa435507a6b12ec0a04cbb11f8972efaf9
          name: Write package metadata for openbsd_386_package
          command: |
            make package-meta
      - load-openbsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: ca99965130b0cc8a383e0dc65c509d9a89862fbf
          name: Write package metadata for openbsd_amd64_package
          command: |
            make package-meta
      - load-solaris_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 8597823a68c14be058118f6fa96e1e289c969d3e
          name: Write package metadata for solaris_amd64_package
          command: |
            make package-meta
      - load-windows_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 3e4119e14e95b56e99e890332a3a29b9cbb16c3c
          name: Write package metadata for windows_386_package
          command: |
            make package-meta
      - load-windows_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 9974f2f0445ee5b41607b8e117a145aef9a85e66
          name: Write package metadata for windows_amd64_package
          command: |
            make package-meta
      - run:
          name: Write package aliases
          command:
            make aliases
      - run:
          name: List Build Cache
          command: ls -lahR .buildcache

      # Surface the package store directory as an artifact.
      # This makes each zipped package separately downloadable.
      - store_artifacts:
          path: .buildcache/packages
          destination: packages-6396d6cd8ca8ed6f8fa4bcafc4aed984e7ba3f81-a62094d1c5ce029

      # Surface a tarball of the whole package store as an artifact.
      - run: tar -czf packages-6396d6cd8ca8ed6f8fa4bcafc4aed984e7ba3f81-a62094d1c5ce029.tar.gz .buildcache/packages
      - store_artifacts:
          path: packages-6396d6cd8ca8ed6f8fa4bcafc4aed984e7ba3f81-a62094d1c5ce029.tar.gz
          destination: packages-6396d6cd8ca8ed6f8fa4bcafc4aed984e7ba3f81-a62094d1c5ce029.tar.gz

      # Surface a tarball of just the metadata files.
      - run: tar -czf meta-6396d6cd8ca8ed6f8fa4bcafc4aed984e7ba3f81-a62094d1c5ce029.tar.gz .buildcache/packages/store/*.json
      - store_artifacts:
          path: meta-6396d6cd8ca8ed6f8fa4bcafc4aed984e7ba3f81-a62094d1c5ce029.tar.gz
          destination: meta-6396d6cd8ca8ed6f8fa4bcafc4aed984e7ba3f81-a62094d1c5ce029.tar.gz

commands:
  load-darwin_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-08451ad9f4555794e93ba325acf7718d0f9730fc-{{checksum ".buildcache/cache-keys/package-08451ad9f4555794e93ba325acf7718d0f9730fc"}}'
  
  load-darwin_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-ce557e05bece60e3c60e1ae5746f830365691fd0-{{checksum ".buildcache/cache-keys/package-ce557e05bece60e3c60e1ae5746f830365691fd0"}}'
  
  load-freebsd_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-6efb3807cccfd636f9184372c8a3e157565dd0d8-{{checksum ".buildcache/cache-keys/package-6efb3807cccfd636f9184372c8a3e157565dd0d8"}}'
  
  load-freebsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-4f100621009e6e24aed1ad734ff953c593000f5b-{{checksum ".buildcache/cache-keys/package-4f100621009e6e24aed1ad734ff953c593000f5b"}}'
  
  load-freebsd_arm_package:
    steps:
      - restore_cache:
          key: 'cache002-package-d769ae2de574ca68bec8c176139feb4a784d5268-{{checksum ".buildcache/cache-keys/package-d769ae2de574ca68bec8c176139feb4a784d5268"}}'
  
  load-linux_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-ab09323e23fed3a7e5eacc1fa475b6f5a3ba7f0f-{{checksum ".buildcache/cache-keys/package-ab09323e23fed3a7e5eacc1fa475b6f5a3ba7f0f"}}'
  
  load-linux_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-6fa6afe4298bb9dd09de4541c08730ec076178d4-{{checksum ".buildcache/cache-keys/package-6fa6afe4298bb9dd09de4541c08730ec076178d4"}}'
  
  load-linux_arm_package:
    steps:
      - restore_cache:
          key: 'cache002-package-7f9eb95045b256584d638f405c4af47000b5756f-{{checksum ".buildcache/cache-keys/package-7f9eb95045b256584d638f405c4af47000b5756f"}}'
  
  load-linux_arm64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-c376c87c5ee6645bdb52ad82f17cc20dc259d584-{{checksum ".buildcache/cache-keys/package-c376c87c5ee6645bdb52ad82f17cc20dc259d584"}}'
  
  load-netbsd_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-edf9b6f8a4c6ccfa11af88c5b12cbfc7ef546cca-{{checksum ".buildcache/cache-keys/package-edf9b6f8a4c6ccfa11af88c5b12cbfc7ef546cca"}}'
  
  load-netbsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-f859668a471c46d8a107343285c513027dc47272-{{checksum ".buildcache/cache-keys/package-f859668a471c46d8a107343285c513027dc47272"}}'
  
  load-openbsd_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-ef7229fa435507a6b12ec0a04cbb11f8972efaf9-{{checksum ".buildcache/cache-keys/package-ef7229fa435507a6b12ec0a04cbb11f8972efaf9"}}'
  
  load-openbsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-ca99965130b0cc8a383e0dc65c509d9a89862fbf-{{checksum ".buildcache/cache-keys/package-ca99965130b0cc8a383e0dc65c509d9a89862fbf"}}'
  
  load-solaris_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-8597823a68c14be058118f6fa96e1e289c969d3e-{{checksum ".buildcache/cache-keys/package-8597823a68c14be058118f6fa96e1e289c969d3e"}}'
  
  load-windows_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-3e4119e14e95b56e99e890332a3a29b9cbb16c3c-{{checksum ".buildcache/cache-keys/package-3e4119e14e95b56e99e890332a3a29b9cbb16c3c"}}'
  
  load-windows_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-9974f2f0445ee5b41607b8e117a145aef9a85e66-{{checksum ".buildcache/cache-keys/package-9974f2f0445ee5b41607b8e117a145aef9a85e66"}}'
  

  write-build-layer-cache-keys:
    steps:
      - run:
          name: Write builder layer cache keys
          command: make -C packages*.lock write-builder-cache-keys

  write-package-cache-key:
    steps:
      - run:
          name: Write package cache key
          command: make -C packages*.lock write-package-cache-key

  write-all-package-cache-keys:
    steps:
      - run:
          name: Write package cache key
          command: make -C packages*.lock write-all-package-cache-keys
