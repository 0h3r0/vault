---
# ***
# WARNING: Do not EDIT or MERGE this file, it is generated by packagespec.
# ***

version: 2.1

executors:
  releaser:
    docker:
      - image: circleci/buildpack-deps
    environment:
      PRODUCT_REVISION: "6d2ffca92d55cd9020211ce6d1529d82de397258"
      AUTO_INSTALL_TOOLS: 'YES'
    shell: /usr/bin/env bash -euo pipefail -c

workflows:
  version: 2
  build-6d2ffca92d55cd9020211ce6d1529d82de397258-7db7b57d85b95365:
    jobs:
      - cache-builder-images
      - darwin_386_package: { requires: [ cache-builder-images ] }
      - darwin_amd64_package: { requires: [ cache-builder-images ] }
      - freebsd_386_package: { requires: [ cache-builder-images ] }
      - freebsd_amd64_package: { requires: [ cache-builder-images ] }
      - freebsd_arm_package: { requires: [ cache-builder-images ] }
      - linux_386_package: { requires: [ cache-builder-images ] }
      - linux_amd64_package: { requires: [ cache-builder-images ] }
      - linux_arm_package: { requires: [ cache-builder-images ] }
      - linux_arm64_package: { requires: [ cache-builder-images ] }
      - netbsd_386_package: { requires: [ cache-builder-images ] }
      - netbsd_amd64_package: { requires: [ cache-builder-images ] }
      - openbsd_386_package: { requires: [ cache-builder-images ] }
      - openbsd_amd64_package: { requires: [ cache-builder-images ] }
      - solaris_amd64_package: { requires: [ cache-builder-images ] }
      - windows_386_package: { requires: [ cache-builder-images ] }
      - windows_amd64_package: { requires: [ cache-builder-images ] }
      - bundle-releases:
          requires:
            - darwin_386_package
            - darwin_amd64_package
            - freebsd_386_package
            - freebsd_amd64_package
            - freebsd_arm_package
            - linux_386_package
            - linux_amd64_package
            - linux_arm_package
            - linux_arm64_package
            - netbsd_386_package
            - netbsd_amd64_package
            - openbsd_386_package
            - openbsd_amd64_package
            - solaris_amd64_package
            - windows_386_package
            - windows_amd64_package
jobs:
  cache-builder-images:
    executor: releaser
    steps:
      - setup_remote_docker
      - checkout
      - write-build-layer-cache-keys

      # Load best available cached image.

      # TODO: Determine latest common layer name.
      # FOR NOW: Just build the first layer.
      - restore_cache:
          keys:
            - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Finish early if loaded exact match from cache.
          command: |
            if [ -f .buildcache/archives/00-base-31734631257b3779d02665ecc77e06482f6104e8.tar.gz ]; then
              echo "Exact match found in cache, skipping build."
              circleci-agent step halt
            else
              echo "No exact match found, proceeding with build."
            fi
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            LAYER_SPEC_ID=00-base-31734631257b3779d02665ecc77e06482f6104e8 make -C packages*.lock load-builder-cache

      # No exact match was found, so build each layer up to target type.
      - run: make -f packages*.lock/layer.mk 00-base-31734631257b3779d02665ecc77e06482f6104e8-image

      # Save the target layer archive.
      
      - run: make -f packages*.lock/layer.mk 00-base-31734631257b3779d02665ecc77e06482f6104e8-save
      
      # Store the target layer archive as all the relevant cache names.
      - save_cache:
          key: cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
          paths:
            - .buildcache/archives/00-base-31734631257b3779d02665ecc77e06482f6104e8.tar.gz
  darwin_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 576cf4ab7273cc94c59e23f9568c1ee534ebb521
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-576cf4ab7273cc94c59e23f9568c1ee534ebb521-{{checksum ".buildcache/cache-keys/package-576cf4ab7273cc94c59e23f9568c1ee534ebb521"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_8e3e_{{checksum ".buildcache/cache-keys/copy-source-8e3e42cafea97e9cbcaed67fbd15787d255207ba"}}
          - cache001-warm-go-build-vendor-cache_1222_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-12225c8ef68cd05d75b164681c9d0463a7a98f80"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-576cf4ab7273cc94c59e23f9568c1ee534ebb521-{{checksum ".buildcache/cache-keys/package-576cf4ab7273cc94c59e23f9568c1ee534ebb521"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-12225c8ef68cd05d75b164681c9d0463a7a98f80.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-12225c8ef68cd05d75b164681c9d0463a7a98f80-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_1222_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-12225c8ef68cd05d75b164681c9d0463a7a98f80"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-12225c8ef68cd05d75b164681c9d0463a7a98f80.tar.gz

  darwin_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 2ded100e1c2c914b81fb6662ffbc00819fb05a5b
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-2ded100e1c2c914b81fb6662ffbc00819fb05a5b-{{checksum ".buildcache/cache-keys/package-2ded100e1c2c914b81fb6662ffbc00819fb05a5b"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_ddbb_{{checksum ".buildcache/cache-keys/copy-source-ddbb542a86e84e8293cc7627c3925e33651c0ecb"}}
          - cache001-warm-go-build-vendor-cache_de1d_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-de1d44767bbc6a5c2bee1d7fd74fff15472a674f"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-2ded100e1c2c914b81fb6662ffbc00819fb05a5b-{{checksum ".buildcache/cache-keys/package-2ded100e1c2c914b81fb6662ffbc00819fb05a5b"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-de1d44767bbc6a5c2bee1d7fd74fff15472a674f.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-de1d44767bbc6a5c2bee1d7fd74fff15472a674f-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_de1d_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-de1d44767bbc6a5c2bee1d7fd74fff15472a674f"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-de1d44767bbc6a5c2bee1d7fd74fff15472a674f.tar.gz

  freebsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 31e14d5da8c4841a735f1fdcd06df6e73a079ba2
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-31e14d5da8c4841a735f1fdcd06df6e73a079ba2-{{checksum ".buildcache/cache-keys/package-31e14d5da8c4841a735f1fdcd06df6e73a079ba2"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_8a1a_{{checksum ".buildcache/cache-keys/copy-source-8a1a3464487dd0bf35500ee7fa2af199177f9280"}}
          - cache001-warm-go-build-vendor-cache_5fd9_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-5fd9c57c4ce3c581aa8b745a9ae7f664d49ef0bd"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-31e14d5da8c4841a735f1fdcd06df6e73a079ba2-{{checksum ".buildcache/cache-keys/package-31e14d5da8c4841a735f1fdcd06df6e73a079ba2"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-5fd9c57c4ce3c581aa8b745a9ae7f664d49ef0bd.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-5fd9c57c4ce3c581aa8b745a9ae7f664d49ef0bd-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_5fd9_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-5fd9c57c4ce3c581aa8b745a9ae7f664d49ef0bd"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-5fd9c57c4ce3c581aa8b745a9ae7f664d49ef0bd.tar.gz

  freebsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 22b2b5ae848775de937acae90ae40dc1a05314ad
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-22b2b5ae848775de937acae90ae40dc1a05314ad-{{checksum ".buildcache/cache-keys/package-22b2b5ae848775de937acae90ae40dc1a05314ad"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_69ea_{{checksum ".buildcache/cache-keys/copy-source-69ea2ad7874ada6cafc06bac7b9f757637f18be6"}}
          - cache001-warm-go-build-vendor-cache_ba12_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-ba120951c1306c9e4be089f6a267770188cfc32a"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-22b2b5ae848775de937acae90ae40dc1a05314ad-{{checksum ".buildcache/cache-keys/package-22b2b5ae848775de937acae90ae40dc1a05314ad"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-ba120951c1306c9e4be089f6a267770188cfc32a.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-ba120951c1306c9e4be089f6a267770188cfc32a-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_ba12_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-ba120951c1306c9e4be089f6a267770188cfc32a"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-ba120951c1306c9e4be089f6a267770188cfc32a.tar.gz

  freebsd_arm_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 0e1efdb0a8e540ca63dfb5c895fecf6e3477656a
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-0e1efdb0a8e540ca63dfb5c895fecf6e3477656a-{{checksum ".buildcache/cache-keys/package-0e1efdb0a8e540ca63dfb5c895fecf6e3477656a"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_1085_{{checksum ".buildcache/cache-keys/copy-source-10854cb8021169d122f58374562bac45d7a10d6e"}}
          - cache001-warm-go-build-vendor-cache_b763_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-b76326780d29031685bbd3038efe7d158d134132"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-0e1efdb0a8e540ca63dfb5c895fecf6e3477656a-{{checksum ".buildcache/cache-keys/package-0e1efdb0a8e540ca63dfb5c895fecf6e3477656a"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-b76326780d29031685bbd3038efe7d158d134132.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-b76326780d29031685bbd3038efe7d158d134132-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_b763_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-b76326780d29031685bbd3038efe7d158d134132"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-b76326780d29031685bbd3038efe7d158d134132.tar.gz

  linux_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 81aeab90115c2e682a1655ada449ad79cb13c6fd
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-81aeab90115c2e682a1655ada449ad79cb13c6fd-{{checksum ".buildcache/cache-keys/package-81aeab90115c2e682a1655ada449ad79cb13c6fd"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_d1ed_{{checksum ".buildcache/cache-keys/copy-source-d1eda11bb6005d29e8fc1b1aae490c510bd9630b"}}
          - cache001-warm-go-build-vendor-cache_43c0_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-43c09371aa7dbe6338751a3045adc513aaf0630e"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-81aeab90115c2e682a1655ada449ad79cb13c6fd-{{checksum ".buildcache/cache-keys/package-81aeab90115c2e682a1655ada449ad79cb13c6fd"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-43c09371aa7dbe6338751a3045adc513aaf0630e.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-43c09371aa7dbe6338751a3045adc513aaf0630e-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_43c0_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-43c09371aa7dbe6338751a3045adc513aaf0630e"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-43c09371aa7dbe6338751a3045adc513aaf0630e.tar.gz

  linux_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 47eaa4ba278d3c89b4aabf8ee6178cb8d4b46b42
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-47eaa4ba278d3c89b4aabf8ee6178cb8d4b46b42-{{checksum ".buildcache/cache-keys/package-47eaa4ba278d3c89b4aabf8ee6178cb8d4b46b42"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_edbb_{{checksum ".buildcache/cache-keys/copy-source-edbbba9a1e85771560a86a51083858bc4910e5e6"}}
          - cache001-warm-go-build-vendor-cache_cddc_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-cddc5cc60d97c8b286509284601eb88e5cc1b81b"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-47eaa4ba278d3c89b4aabf8ee6178cb8d4b46b42-{{checksum ".buildcache/cache-keys/package-47eaa4ba278d3c89b4aabf8ee6178cb8d4b46b42"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-cddc5cc60d97c8b286509284601eb88e5cc1b81b.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-cddc5cc60d97c8b286509284601eb88e5cc1b81b-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_cddc_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-cddc5cc60d97c8b286509284601eb88e5cc1b81b"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-cddc5cc60d97c8b286509284601eb88e5cc1b81b.tar.gz

  linux_arm_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 5e9415cb297ecc2a4e9d2068e91f0346aa3796e5
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-5e9415cb297ecc2a4e9d2068e91f0346aa3796e5-{{checksum ".buildcache/cache-keys/package-5e9415cb297ecc2a4e9d2068e91f0346aa3796e5"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_0dc4_{{checksum ".buildcache/cache-keys/copy-source-0dc4d48388cda33981d3042df49ff104de38c945"}}
          - cache001-warm-go-build-vendor-cache_9d70_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-9d70035da36fbdc323b06ada10daf58e6d189193"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-5e9415cb297ecc2a4e9d2068e91f0346aa3796e5-{{checksum ".buildcache/cache-keys/package-5e9415cb297ecc2a4e9d2068e91f0346aa3796e5"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-9d70035da36fbdc323b06ada10daf58e6d189193.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-9d70035da36fbdc323b06ada10daf58e6d189193-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_9d70_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-9d70035da36fbdc323b06ada10daf58e6d189193"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-9d70035da36fbdc323b06ada10daf58e6d189193.tar.gz

  linux_arm64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: d681543a23d988b1df9b1fca2b0afd8686abff4f
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-d681543a23d988b1df9b1fca2b0afd8686abff4f-{{checksum ".buildcache/cache-keys/package-d681543a23d988b1df9b1fca2b0afd8686abff4f"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_61b4_{{checksum ".buildcache/cache-keys/copy-source-61b4712f869a24390334eac79f07bf9ebc52c079"}}
          - cache001-warm-go-build-vendor-cache_8c82_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-8c822ba5ee063d652dff9e789f153a6b162c50c9"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-d681543a23d988b1df9b1fca2b0afd8686abff4f-{{checksum ".buildcache/cache-keys/package-d681543a23d988b1df9b1fca2b0afd8686abff4f"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-8c822ba5ee063d652dff9e789f153a6b162c50c9.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-8c822ba5ee063d652dff9e789f153a6b162c50c9-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_8c82_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-8c822ba5ee063d652dff9e789f153a6b162c50c9"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-8c822ba5ee063d652dff9e789f153a6b162c50c9.tar.gz

  netbsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: b90ec64abb007efe0340c8922d1ab0567263ccfb
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-b90ec64abb007efe0340c8922d1ab0567263ccfb-{{checksum ".buildcache/cache-keys/package-b90ec64abb007efe0340c8922d1ab0567263ccfb"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_6be0_{{checksum ".buildcache/cache-keys/copy-source-6be0f2f5fbda68e9f4230daf6acbc139108f96a4"}}
          - cache001-warm-go-build-vendor-cache_f876_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-f876076a9fc5d9cb1953aa2dbaec4b9be06ba077"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-b90ec64abb007efe0340c8922d1ab0567263ccfb-{{checksum ".buildcache/cache-keys/package-b90ec64abb007efe0340c8922d1ab0567263ccfb"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-f876076a9fc5d9cb1953aa2dbaec4b9be06ba077.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-f876076a9fc5d9cb1953aa2dbaec4b9be06ba077-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_f876_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-f876076a9fc5d9cb1953aa2dbaec4b9be06ba077"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-f876076a9fc5d9cb1953aa2dbaec4b9be06ba077.tar.gz

  netbsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: d6d46e33c9396ba9030435ec4473b9f7066ae0e4
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-d6d46e33c9396ba9030435ec4473b9f7066ae0e4-{{checksum ".buildcache/cache-keys/package-d6d46e33c9396ba9030435ec4473b9f7066ae0e4"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_0f2d_{{checksum ".buildcache/cache-keys/copy-source-0f2d5d7e5b6f274cf33995fe06756cb027b23014"}}
          - cache001-warm-go-build-vendor-cache_3c15_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3c1544a4ea76eb74c3e608df589c47342c64695c"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-d6d46e33c9396ba9030435ec4473b9f7066ae0e4-{{checksum ".buildcache/cache-keys/package-d6d46e33c9396ba9030435ec4473b9f7066ae0e4"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-3c1544a4ea76eb74c3e608df589c47342c64695c.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-3c1544a4ea76eb74c3e608df589c47342c64695c-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_3c15_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3c1544a4ea76eb74c3e608df589c47342c64695c"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-3c1544a4ea76eb74c3e608df589c47342c64695c.tar.gz

  openbsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 51f72ed807e0525f10927a417aba193199411b82
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-51f72ed807e0525f10927a417aba193199411b82-{{checksum ".buildcache/cache-keys/package-51f72ed807e0525f10927a417aba193199411b82"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_5481_{{checksum ".buildcache/cache-keys/copy-source-54812d13c3878c6e2dfe7812dcdb38c5b2ee5fa1"}}
          - cache001-warm-go-build-vendor-cache_4d73_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-4d73d38a30a1b37ceef70beb8bea91548b85ba16"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-51f72ed807e0525f10927a417aba193199411b82-{{checksum ".buildcache/cache-keys/package-51f72ed807e0525f10927a417aba193199411b82"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-4d73d38a30a1b37ceef70beb8bea91548b85ba16.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-4d73d38a30a1b37ceef70beb8bea91548b85ba16-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_4d73_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-4d73d38a30a1b37ceef70beb8bea91548b85ba16"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-4d73d38a30a1b37ceef70beb8bea91548b85ba16.tar.gz

  openbsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 6c0cb2af7a9a832257b8cdf974dbb8cccbae2579
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-6c0cb2af7a9a832257b8cdf974dbb8cccbae2579-{{checksum ".buildcache/cache-keys/package-6c0cb2af7a9a832257b8cdf974dbb8cccbae2579"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_2d1a_{{checksum ".buildcache/cache-keys/copy-source-2d1a5ab70e14becf161c94b9e8ef78da477e6eac"}}
          - cache001-warm-go-build-vendor-cache_16f5_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-16f506fa344cf76952581ca9c92695652d638359"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-6c0cb2af7a9a832257b8cdf974dbb8cccbae2579-{{checksum ".buildcache/cache-keys/package-6c0cb2af7a9a832257b8cdf974dbb8cccbae2579"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-16f506fa344cf76952581ca9c92695652d638359.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-16f506fa344cf76952581ca9c92695652d638359-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_16f5_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-16f506fa344cf76952581ca9c92695652d638359"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-16f506fa344cf76952581ca9c92695652d638359.tar.gz

  solaris_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 9c8f12c5de8f3bb5d87210bfbfe5e812d0f4d824
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-9c8f12c5de8f3bb5d87210bfbfe5e812d0f4d824-{{checksum ".buildcache/cache-keys/package-9c8f12c5de8f3bb5d87210bfbfe5e812d0f4d824"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_e491_{{checksum ".buildcache/cache-keys/copy-source-e4919d12d4d579429115ce132f66aaa67c92509e"}}
          - cache001-warm-go-build-vendor-cache_a8f7_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-a8f76a62481f2ca9cda207efcb8cb9517e1c5039"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-9c8f12c5de8f3bb5d87210bfbfe5e812d0f4d824-{{checksum ".buildcache/cache-keys/package-9c8f12c5de8f3bb5d87210bfbfe5e812d0f4d824"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-a8f76a62481f2ca9cda207efcb8cb9517e1c5039.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-a8f76a62481f2ca9cda207efcb8cb9517e1c5039-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_a8f7_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-a8f76a62481f2ca9cda207efcb8cb9517e1c5039"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-a8f76a62481f2ca9cda207efcb8cb9517e1c5039.tar.gz

  windows_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 08b80045e1bde8a3ef118f8ae4cf8a3f3a2a2ef8
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-08b80045e1bde8a3ef118f8ae4cf8a3f3a2a2ef8-{{checksum ".buildcache/cache-keys/package-08b80045e1bde8a3ef118f8ae4cf8a3f3a2a2ef8"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_43cd_{{checksum ".buildcache/cache-keys/copy-source-43cd1e22eb22d1cb46875f3084f7a0114bc08de7"}}
          - cache001-warm-go-build-vendor-cache_3d2d_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3d2da534455d043c6e108757337644caf6f0397f"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-08b80045e1bde8a3ef118f8ae4cf8a3f3a2a2ef8-{{checksum ".buildcache/cache-keys/package-08b80045e1bde8a3ef118f8ae4cf8a3f3a2a2ef8"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-3d2da534455d043c6e108757337644caf6f0397f.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-3d2da534455d043c6e108757337644caf6f0397f-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_3d2d_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3d2da534455d043c6e108757337644caf6f0397f"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-3d2da534455d043c6e108757337644caf6f0397f.tar.gz

  windows_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 98e16338b95f207216570feae945242b8bf610db
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-98e16338b95f207216570feae945242b8bf610db-{{checksum ".buildcache/cache-keys/package-98e16338b95f207216570feae945242b8bf610db"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_ebf1_{{checksum ".buildcache/cache-keys/copy-source-ebf1da591a6cccdcc10038d731c9a223b719d54a"}}
          - cache001-warm-go-build-vendor-cache_296b_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-296b20db286b5b99d90faf07c9c27af50d7b827c"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-98e16338b95f207216570feae945242b8bf610db-{{checksum ".buildcache/cache-keys/package-98e16338b95f207216570feae945242b8bf610db"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-296b20db286b5b99d90faf07c9c27af50d7b827c.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-296b20db286b5b99d90faf07c9c27af50d7b827c-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_296b_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-296b20db286b5b99d90faf07c9c27af50d7b827c"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-296b20db286b5b99d90faf07c9c27af50d7b827c.tar.gz


  bundle-releases:
    executor: releaser
    steps:
      - checkout
      - write-all-package-cache-keys
      - load-darwin_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 576cf4ab7273cc94c59e23f9568c1ee534ebb521
          name: Write package metadata for darwin_386_package
          command: |
            make package-meta
      - load-darwin_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 2ded100e1c2c914b81fb6662ffbc00819fb05a5b
          name: Write package metadata for darwin_amd64_package
          command: |
            make package-meta
      - load-freebsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 31e14d5da8c4841a735f1fdcd06df6e73a079ba2
          name: Write package metadata for freebsd_386_package
          command: |
            make package-meta
      - load-freebsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 22b2b5ae848775de937acae90ae40dc1a05314ad
          name: Write package metadata for freebsd_amd64_package
          command: |
            make package-meta
      - load-freebsd_arm_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 0e1efdb0a8e540ca63dfb5c895fecf6e3477656a
          name: Write package metadata for freebsd_arm_package
          command: |
            make package-meta
      - load-linux_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 81aeab90115c2e682a1655ada449ad79cb13c6fd
          name: Write package metadata for linux_386_package
          command: |
            make package-meta
      - load-linux_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 47eaa4ba278d3c89b4aabf8ee6178cb8d4b46b42
          name: Write package metadata for linux_amd64_package
          command: |
            make package-meta
      - load-linux_arm_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 5e9415cb297ecc2a4e9d2068e91f0346aa3796e5
          name: Write package metadata for linux_arm_package
          command: |
            make package-meta
      - load-linux_arm64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: d681543a23d988b1df9b1fca2b0afd8686abff4f
          name: Write package metadata for linux_arm64_package
          command: |
            make package-meta
      - load-netbsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: b90ec64abb007efe0340c8922d1ab0567263ccfb
          name: Write package metadata for netbsd_386_package
          command: |
            make package-meta
      - load-netbsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: d6d46e33c9396ba9030435ec4473b9f7066ae0e4
          name: Write package metadata for netbsd_amd64_package
          command: |
            make package-meta
      - load-openbsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 51f72ed807e0525f10927a417aba193199411b82
          name: Write package metadata for openbsd_386_package
          command: |
            make package-meta
      - load-openbsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 6c0cb2af7a9a832257b8cdf974dbb8cccbae2579
          name: Write package metadata for openbsd_amd64_package
          command: |
            make package-meta
      - load-solaris_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 9c8f12c5de8f3bb5d87210bfbfe5e812d0f4d824
          name: Write package metadata for solaris_amd64_package
          command: |
            make package-meta
      - load-windows_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 08b80045e1bde8a3ef118f8ae4cf8a3f3a2a2ef8
          name: Write package metadata for windows_386_package
          command: |
            make package-meta
      - load-windows_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 98e16338b95f207216570feae945242b8bf610db
          name: Write package metadata for windows_amd64_package
          command: |
            make package-meta
      - run:
          name: Write package aliases
          command:
            make aliases
      - run:
          name: List Build Cache
          command: ls -lahR .buildcache

      # Give the lockfile a name store_artifacts can work with.
      - run: cp packages*.lock/pkgs.yml lockfile-6d2ffca92d55cd9020211ce6d1529d82de397258-7db7b57d85b95365.yml

      # Surface the lock file as an artifact.
      - store_artifacts:
          path: lockfile-6d2ffca92d55cd9020211ce6d1529d82de397258-7db7b57d85b95365.yml
          destination: lockfile-6d2ffca92d55cd9020211ce6d1529d82de397258-7db7b57d85b95365.yml

      # Surface the package store directory as an artifact.
      # This makes each zipped package separately downloadable.
      - store_artifacts:
          path: .buildcache/packages
          destination: packages-6d2ffca92d55cd9020211ce6d1529d82de397258-7db7b57d85b95365

      # Surface a tarball of the whole package store plus lockfile as an artifact.
      - run: tar -czf packages-6d2ffca92d55cd9020211ce6d1529d82de397258-7db7b57d85b95365.tar.gz .buildcache/packages lockfile-6d2ffca92d55cd9020211ce6d1529d82de397258-7db7b57d85b95365.yml
      - store_artifacts:
          path: packages-6d2ffca92d55cd9020211ce6d1529d82de397258-7db7b57d85b95365.tar.gz
          destination: packages-6d2ffca92d55cd9020211ce6d1529d82de397258-7db7b57d85b95365.tar.gz

      # Surface a tarball of just the metadata files.
      - run: tar -czf meta-6d2ffca92d55cd9020211ce6d1529d82de397258-7db7b57d85b95365.tar.gz .buildcache/packages/store/*.json lockfile-6d2ffca92d55cd9020211ce6d1529d82de397258-7db7b57d85b95365.yml
      - store_artifacts:
          path: meta-6d2ffca92d55cd9020211ce6d1529d82de397258-7db7b57d85b95365.tar.gz
          destination: meta-6d2ffca92d55cd9020211ce6d1529d82de397258-7db7b57d85b95365.tar.gz

commands:
  load-darwin_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-576cf4ab7273cc94c59e23f9568c1ee534ebb521-{{checksum ".buildcache/cache-keys/package-576cf4ab7273cc94c59e23f9568c1ee534ebb521"}}'
  
  load-darwin_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-2ded100e1c2c914b81fb6662ffbc00819fb05a5b-{{checksum ".buildcache/cache-keys/package-2ded100e1c2c914b81fb6662ffbc00819fb05a5b"}}'
  
  load-freebsd_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-31e14d5da8c4841a735f1fdcd06df6e73a079ba2-{{checksum ".buildcache/cache-keys/package-31e14d5da8c4841a735f1fdcd06df6e73a079ba2"}}'
  
  load-freebsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-22b2b5ae848775de937acae90ae40dc1a05314ad-{{checksum ".buildcache/cache-keys/package-22b2b5ae848775de937acae90ae40dc1a05314ad"}}'
  
  load-freebsd_arm_package:
    steps:
      - restore_cache:
          key: 'cache001-package-0e1efdb0a8e540ca63dfb5c895fecf6e3477656a-{{checksum ".buildcache/cache-keys/package-0e1efdb0a8e540ca63dfb5c895fecf6e3477656a"}}'
  
  load-linux_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-81aeab90115c2e682a1655ada449ad79cb13c6fd-{{checksum ".buildcache/cache-keys/package-81aeab90115c2e682a1655ada449ad79cb13c6fd"}}'
  
  load-linux_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-47eaa4ba278d3c89b4aabf8ee6178cb8d4b46b42-{{checksum ".buildcache/cache-keys/package-47eaa4ba278d3c89b4aabf8ee6178cb8d4b46b42"}}'
  
  load-linux_arm_package:
    steps:
      - restore_cache:
          key: 'cache001-package-5e9415cb297ecc2a4e9d2068e91f0346aa3796e5-{{checksum ".buildcache/cache-keys/package-5e9415cb297ecc2a4e9d2068e91f0346aa3796e5"}}'
  
  load-linux_arm64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-d681543a23d988b1df9b1fca2b0afd8686abff4f-{{checksum ".buildcache/cache-keys/package-d681543a23d988b1df9b1fca2b0afd8686abff4f"}}'
  
  load-netbsd_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-b90ec64abb007efe0340c8922d1ab0567263ccfb-{{checksum ".buildcache/cache-keys/package-b90ec64abb007efe0340c8922d1ab0567263ccfb"}}'
  
  load-netbsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-d6d46e33c9396ba9030435ec4473b9f7066ae0e4-{{checksum ".buildcache/cache-keys/package-d6d46e33c9396ba9030435ec4473b9f7066ae0e4"}}'
  
  load-openbsd_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-51f72ed807e0525f10927a417aba193199411b82-{{checksum ".buildcache/cache-keys/package-51f72ed807e0525f10927a417aba193199411b82"}}'
  
  load-openbsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-6c0cb2af7a9a832257b8cdf974dbb8cccbae2579-{{checksum ".buildcache/cache-keys/package-6c0cb2af7a9a832257b8cdf974dbb8cccbae2579"}}'
  
  load-solaris_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-9c8f12c5de8f3bb5d87210bfbfe5e812d0f4d824-{{checksum ".buildcache/cache-keys/package-9c8f12c5de8f3bb5d87210bfbfe5e812d0f4d824"}}'
  
  load-windows_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-08b80045e1bde8a3ef118f8ae4cf8a3f3a2a2ef8-{{checksum ".buildcache/cache-keys/package-08b80045e1bde8a3ef118f8ae4cf8a3f3a2a2ef8"}}'
  
  load-windows_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-98e16338b95f207216570feae945242b8bf610db-{{checksum ".buildcache/cache-keys/package-98e16338b95f207216570feae945242b8bf610db"}}'
  

  write-build-layer-cache-keys:
    steps:
      - run:
          name: Write builder layer cache keys
          command: make -C packages*.lock write-builder-cache-keys

  write-package-cache-key:
    steps:
      - run:
          name: Write package cache key
          command: make -C packages*.lock write-package-cache-key

  write-all-package-cache-keys:
    steps:
      - run:
          name: Write package cache key
          command: make -C packages*.lock write-all-package-cache-keys
