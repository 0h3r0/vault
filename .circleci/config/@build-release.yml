---
# ***
# WARNING: Do not EDIT or MERGE this file, it is generated by packagespec.
# ***

version: 2.1

executors:
  releaser:
    docker:
      - image: circleci/buildpack-deps
    environment:
      PRODUCT_REVISION: "d1c17df8afc8ee11f8c4c6e652cfce7190e57c00"
      AUTO_INSTALL_TOOLS: 'YES'
    shell: /usr/bin/env bash -euo pipefail -c

workflows:
  version: 2
  build-d1c17df8afc8ee11f8c4c6e652cfce7190e57c00-77fd4e8a5a9c224b:
    jobs:
      - cache-builder-images
      - darwin_386_package: { requires: [ cache-builder-images ] }
      - darwin_amd64_package: { requires: [ cache-builder-images ] }
      - freebsd_386_package: { requires: [ cache-builder-images ] }
      - freebsd_amd64_package: { requires: [ cache-builder-images ] }
      - freebsd_arm_package: { requires: [ cache-builder-images ] }
      - linux_386_package: { requires: [ cache-builder-images ] }
      - linux_amd64_package: { requires: [ cache-builder-images ] }
      - linux_arm_package: { requires: [ cache-builder-images ] }
      - linux_arm64_package: { requires: [ cache-builder-images ] }
      - netbsd_386_package: { requires: [ cache-builder-images ] }
      - netbsd_amd64_package: { requires: [ cache-builder-images ] }
      - openbsd_386_package: { requires: [ cache-builder-images ] }
      - openbsd_amd64_package: { requires: [ cache-builder-images ] }
      - solaris_amd64_package: { requires: [ cache-builder-images ] }
      - windows_386_package: { requires: [ cache-builder-images ] }
      - windows_amd64_package: { requires: [ cache-builder-images ] }
      - bundle-releases:
          requires:
            - darwin_386_package
            - darwin_amd64_package
            - freebsd_386_package
            - freebsd_amd64_package
            - freebsd_arm_package
            - linux_386_package
            - linux_amd64_package
            - linux_arm_package
            - linux_arm64_package
            - netbsd_386_package
            - netbsd_amd64_package
            - openbsd_386_package
            - openbsd_amd64_package
            - solaris_amd64_package
            - windows_386_package
            - windows_amd64_package
jobs:
  cache-builder-images:
    executor: releaser
    steps:
      - setup_remote_docker
      - checkout
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
            - cache001-build-ui_d1b1_{{checksum ".buildcache/cache-keys/build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90"}}
            - cache001-ui-dependencies_db53_{{checksum ".buildcache/cache-keys/ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873"}}
            - cache001-install-yarn_7b37_{{checksum ".buildcache/cache-keys/install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd"}}
            - cache001-set-workdir_cdfe_{{checksum ".buildcache/cache-keys/set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e"}}
            - cache001-install-go-tools_74ba_{{checksum ".buildcache/cache-keys/install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2"}}
            - cache001-install-go_fbcf_{{checksum ".buildcache/cache-keys/install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640"}}
            - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Finish early if loaded exact match from cache.
          command: |
            if [ -f .buildcache/archives/06-build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90.tar.gz ]; then
              echo "Exact match found in cache, skipping build."
              circleci-agent step halt
            else
              echo "No exact match found, proceeding with build."
            fi
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            LAYER_SPEC_ID=06-build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90 make -C packages*.lock load-builder-cache
      - run: make -f packages*.lock/layer.mk 00-base-31734631257b3779d02665ecc77e06482f6104e8-image
      - run: make -f packages*.lock/layer.mk 01-install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640-image
      - run: make -f packages*.lock/layer.mk 02-install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2-image
      - run: make -f packages*.lock/layer.mk 03-set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e-image
      - run: make -f packages*.lock/layer.mk 04-install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd-image
      - run: make -f packages*.lock/layer.mk 05-ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873-image
      - run: make -f packages*.lock/layer.mk 06-build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90-image
      - run: make -f packages*.lock/layer.mk 06-build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90-save
      - save_cache:
          key: cache001-build-ui_d1b1_{{checksum ".buildcache/cache-keys/build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90"}}
          paths:
            - .buildcache/archives/06-build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90.tar.gz
      - run: mv .buildcache/archives/06-build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90.tar.gz .buildcache/archives/05-ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873.tar.gz
      - save_cache:
          key: cache001-ui-dependencies_db53_{{checksum ".buildcache/cache-keys/ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873"}}
          paths:
            - .buildcache/archives/05-ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873.tar.gz
      - run: mv .buildcache/archives/05-ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873.tar.gz .buildcache/archives/04-install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd.tar.gz
      - save_cache:
          key: cache001-install-yarn_7b37_{{checksum ".buildcache/cache-keys/install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd"}}
          paths:
            - .buildcache/archives/04-install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd.tar.gz
      - run: mv .buildcache/archives/04-install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd.tar.gz .buildcache/archives/03-set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e.tar.gz
      - save_cache:
          key: cache001-set-workdir_cdfe_{{checksum ".buildcache/cache-keys/set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e"}}
          paths:
            - .buildcache/archives/03-set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e.tar.gz
      - run: mv .buildcache/archives/03-set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e.tar.gz .buildcache/archives/02-install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2.tar.gz
      - save_cache:
          key: cache001-install-go-tools_74ba_{{checksum ".buildcache/cache-keys/install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2"}}
          paths:
            - .buildcache/archives/02-install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2.tar.gz
      - run: mv .buildcache/archives/02-install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2.tar.gz .buildcache/archives/01-install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640.tar.gz
      - save_cache:
          key: cache001-install-go_fbcf_{{checksum ".buildcache/cache-keys/install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640"}}
          paths:
            - .buildcache/archives/01-install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640.tar.gz
      - run: mv .buildcache/archives/01-install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640.tar.gz .buildcache/archives/00-base-31734631257b3779d02665ecc77e06482f6104e8.tar.gz
      - save_cache:
          key: cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
          paths:
            - .buildcache/archives/00-base-31734631257b3779d02665ecc77e06482f6104e8.tar.gz
  darwin_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 61871b3ed23b4cefc037b37f54b0014b478c3eea
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-61871b3ed23b4cefc037b37f54b0014b478c3eea-{{checksum ".buildcache/cache-keys/package-61871b3ed23b4cefc037b37f54b0014b478c3eea"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_72f1_{{checksum ".buildcache/cache-keys/copy-source-72f1214dff2bf108a0d2f945b1a096224d821f8a"}}
          - cache001-warm-go-build-vendor-cache_e218_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-e2188ce5faa15f50f7191c4ced0f86691b921771"}}
          - cache001-build-static-assets_8cd9_{{checksum ".buildcache/cache-keys/build-static-assets-8cd9996410d9fabd04f4492e46267f8d050b86c9"}}
          - cache001-build-ui_d1b1_{{checksum ".buildcache/cache-keys/build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90"}}
          - cache001-ui-dependencies_db53_{{checksum ".buildcache/cache-keys/ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873"}}
          - cache001-install-yarn_7b37_{{checksum ".buildcache/cache-keys/install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd"}}
          - cache001-set-workdir_cdfe_{{checksum ".buildcache/cache-keys/set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e"}}
          - cache001-install-go-tools_74ba_{{checksum ".buildcache/cache-keys/install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2"}}
          - cache001-install-go_fbcf_{{checksum ".buildcache/cache-keys/install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-61871b3ed23b4cefc037b37f54b0014b478c3eea-{{checksum ".buildcache/cache-keys/package-61871b3ed23b4cefc037b37f54b0014b478c3eea"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-e2188ce5faa15f50f7191c4ced0f86691b921771.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-e2188ce5faa15f50f7191c4ced0f86691b921771-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_e218_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-e2188ce5faa15f50f7191c4ced0f86691b921771"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-e2188ce5faa15f50f7191c4ced0f86691b921771.tar.gz

  darwin_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: a3192145511b5ad6d246ee27a01ac932e381592c
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-a3192145511b5ad6d246ee27a01ac932e381592c-{{checksum ".buildcache/cache-keys/package-a3192145511b5ad6d246ee27a01ac932e381592c"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_2672_{{checksum ".buildcache/cache-keys/copy-source-2672ca9f14ccd90a34bd082462a14593b5d332cc"}}
          - cache001-warm-go-build-vendor-cache_2f55_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-2f555c899d5b1c87aa883547f01c6288d56a1165"}}
          - cache001-build-static-assets_8cd9_{{checksum ".buildcache/cache-keys/build-static-assets-8cd9996410d9fabd04f4492e46267f8d050b86c9"}}
          - cache001-build-ui_d1b1_{{checksum ".buildcache/cache-keys/build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90"}}
          - cache001-ui-dependencies_db53_{{checksum ".buildcache/cache-keys/ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873"}}
          - cache001-install-yarn_7b37_{{checksum ".buildcache/cache-keys/install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd"}}
          - cache001-set-workdir_cdfe_{{checksum ".buildcache/cache-keys/set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e"}}
          - cache001-install-go-tools_74ba_{{checksum ".buildcache/cache-keys/install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2"}}
          - cache001-install-go_fbcf_{{checksum ".buildcache/cache-keys/install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-a3192145511b5ad6d246ee27a01ac932e381592c-{{checksum ".buildcache/cache-keys/package-a3192145511b5ad6d246ee27a01ac932e381592c"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-2f555c899d5b1c87aa883547f01c6288d56a1165.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-2f555c899d5b1c87aa883547f01c6288d56a1165-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_2f55_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-2f555c899d5b1c87aa883547f01c6288d56a1165"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-2f555c899d5b1c87aa883547f01c6288d56a1165.tar.gz

  freebsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 430fb9b075b7f52cfc67c784ab44d732b36387c5
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-430fb9b075b7f52cfc67c784ab44d732b36387c5-{{checksum ".buildcache/cache-keys/package-430fb9b075b7f52cfc67c784ab44d732b36387c5"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_9ee2_{{checksum ".buildcache/cache-keys/copy-source-9ee2fbf8ba7b6642839563692b9576e8fecbff41"}}
          - cache001-warm-go-build-vendor-cache_7493_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-7493c2619eaada406120ddd01816042f7fc64e71"}}
          - cache001-build-static-assets_8cd9_{{checksum ".buildcache/cache-keys/build-static-assets-8cd9996410d9fabd04f4492e46267f8d050b86c9"}}
          - cache001-build-ui_d1b1_{{checksum ".buildcache/cache-keys/build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90"}}
          - cache001-ui-dependencies_db53_{{checksum ".buildcache/cache-keys/ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873"}}
          - cache001-install-yarn_7b37_{{checksum ".buildcache/cache-keys/install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd"}}
          - cache001-set-workdir_cdfe_{{checksum ".buildcache/cache-keys/set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e"}}
          - cache001-install-go-tools_74ba_{{checksum ".buildcache/cache-keys/install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2"}}
          - cache001-install-go_fbcf_{{checksum ".buildcache/cache-keys/install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-430fb9b075b7f52cfc67c784ab44d732b36387c5-{{checksum ".buildcache/cache-keys/package-430fb9b075b7f52cfc67c784ab44d732b36387c5"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-7493c2619eaada406120ddd01816042f7fc64e71.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-7493c2619eaada406120ddd01816042f7fc64e71-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_7493_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-7493c2619eaada406120ddd01816042f7fc64e71"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-7493c2619eaada406120ddd01816042f7fc64e71.tar.gz

  freebsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 9a0c6676c8c25b5373ff27780493b10911f211ee
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-9a0c6676c8c25b5373ff27780493b10911f211ee-{{checksum ".buildcache/cache-keys/package-9a0c6676c8c25b5373ff27780493b10911f211ee"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_6cc6_{{checksum ".buildcache/cache-keys/copy-source-6cc64f6b4976474a16bbfc318a49710a83becd47"}}
          - cache001-warm-go-build-vendor-cache_5c2d_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-5c2d03ccea6013ff91350d069259396ffe7ce5ab"}}
          - cache001-build-static-assets_8cd9_{{checksum ".buildcache/cache-keys/build-static-assets-8cd9996410d9fabd04f4492e46267f8d050b86c9"}}
          - cache001-build-ui_d1b1_{{checksum ".buildcache/cache-keys/build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90"}}
          - cache001-ui-dependencies_db53_{{checksum ".buildcache/cache-keys/ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873"}}
          - cache001-install-yarn_7b37_{{checksum ".buildcache/cache-keys/install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd"}}
          - cache001-set-workdir_cdfe_{{checksum ".buildcache/cache-keys/set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e"}}
          - cache001-install-go-tools_74ba_{{checksum ".buildcache/cache-keys/install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2"}}
          - cache001-install-go_fbcf_{{checksum ".buildcache/cache-keys/install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-9a0c6676c8c25b5373ff27780493b10911f211ee-{{checksum ".buildcache/cache-keys/package-9a0c6676c8c25b5373ff27780493b10911f211ee"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-5c2d03ccea6013ff91350d069259396ffe7ce5ab.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-5c2d03ccea6013ff91350d069259396ffe7ce5ab-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_5c2d_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-5c2d03ccea6013ff91350d069259396ffe7ce5ab"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-5c2d03ccea6013ff91350d069259396ffe7ce5ab.tar.gz

  freebsd_arm_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: cbf12661d9d21871d5a95e40b4368920e242b434
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-cbf12661d9d21871d5a95e40b4368920e242b434-{{checksum ".buildcache/cache-keys/package-cbf12661d9d21871d5a95e40b4368920e242b434"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_18d3_{{checksum ".buildcache/cache-keys/copy-source-18d36ce4758ab06763674f1a7c09f01f6a8513ce"}}
          - cache001-warm-go-build-vendor-cache_01bc_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-01bcfcd75bfaad88eb78c1307dda9c0223b05650"}}
          - cache001-build-static-assets_8cd9_{{checksum ".buildcache/cache-keys/build-static-assets-8cd9996410d9fabd04f4492e46267f8d050b86c9"}}
          - cache001-build-ui_d1b1_{{checksum ".buildcache/cache-keys/build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90"}}
          - cache001-ui-dependencies_db53_{{checksum ".buildcache/cache-keys/ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873"}}
          - cache001-install-yarn_7b37_{{checksum ".buildcache/cache-keys/install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd"}}
          - cache001-set-workdir_cdfe_{{checksum ".buildcache/cache-keys/set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e"}}
          - cache001-install-go-tools_74ba_{{checksum ".buildcache/cache-keys/install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2"}}
          - cache001-install-go_fbcf_{{checksum ".buildcache/cache-keys/install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-cbf12661d9d21871d5a95e40b4368920e242b434-{{checksum ".buildcache/cache-keys/package-cbf12661d9d21871d5a95e40b4368920e242b434"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-01bcfcd75bfaad88eb78c1307dda9c0223b05650.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-01bcfcd75bfaad88eb78c1307dda9c0223b05650-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_01bc_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-01bcfcd75bfaad88eb78c1307dda9c0223b05650"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-01bcfcd75bfaad88eb78c1307dda9c0223b05650.tar.gz

  linux_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: d07ca803659a6ed237a4f63de25d7bd6bed17e0f
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-d07ca803659a6ed237a4f63de25d7bd6bed17e0f-{{checksum ".buildcache/cache-keys/package-d07ca803659a6ed237a4f63de25d7bd6bed17e0f"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_f619_{{checksum ".buildcache/cache-keys/copy-source-f619d0dc767792f3f8f1b7e6b99635ad9415c9e8"}}
          - cache001-warm-go-build-vendor-cache_7829_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-7829182941a9e2432ff9e6aa2c54fcf330c281a4"}}
          - cache001-build-static-assets_8cd9_{{checksum ".buildcache/cache-keys/build-static-assets-8cd9996410d9fabd04f4492e46267f8d050b86c9"}}
          - cache001-build-ui_d1b1_{{checksum ".buildcache/cache-keys/build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90"}}
          - cache001-ui-dependencies_db53_{{checksum ".buildcache/cache-keys/ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873"}}
          - cache001-install-yarn_7b37_{{checksum ".buildcache/cache-keys/install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd"}}
          - cache001-set-workdir_cdfe_{{checksum ".buildcache/cache-keys/set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e"}}
          - cache001-install-go-tools_74ba_{{checksum ".buildcache/cache-keys/install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2"}}
          - cache001-install-go_fbcf_{{checksum ".buildcache/cache-keys/install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-d07ca803659a6ed237a4f63de25d7bd6bed17e0f-{{checksum ".buildcache/cache-keys/package-d07ca803659a6ed237a4f63de25d7bd6bed17e0f"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-7829182941a9e2432ff9e6aa2c54fcf330c281a4.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-7829182941a9e2432ff9e6aa2c54fcf330c281a4-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_7829_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-7829182941a9e2432ff9e6aa2c54fcf330c281a4"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-7829182941a9e2432ff9e6aa2c54fcf330c281a4.tar.gz

  linux_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 29f9988a89a2ae39d1689928a3b980f9eff6f57d
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-29f9988a89a2ae39d1689928a3b980f9eff6f57d-{{checksum ".buildcache/cache-keys/package-29f9988a89a2ae39d1689928a3b980f9eff6f57d"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_93f0_{{checksum ".buildcache/cache-keys/copy-source-93f073c0f96ef82c487420226c49fc688cca23d1"}}
          - cache001-warm-go-build-vendor-cache_e38b_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-e38bbfd43b103b8c021b1b2ebb91aa458a354a3e"}}
          - cache001-build-static-assets_8cd9_{{checksum ".buildcache/cache-keys/build-static-assets-8cd9996410d9fabd04f4492e46267f8d050b86c9"}}
          - cache001-build-ui_d1b1_{{checksum ".buildcache/cache-keys/build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90"}}
          - cache001-ui-dependencies_db53_{{checksum ".buildcache/cache-keys/ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873"}}
          - cache001-install-yarn_7b37_{{checksum ".buildcache/cache-keys/install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd"}}
          - cache001-set-workdir_cdfe_{{checksum ".buildcache/cache-keys/set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e"}}
          - cache001-install-go-tools_74ba_{{checksum ".buildcache/cache-keys/install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2"}}
          - cache001-install-go_fbcf_{{checksum ".buildcache/cache-keys/install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-29f9988a89a2ae39d1689928a3b980f9eff6f57d-{{checksum ".buildcache/cache-keys/package-29f9988a89a2ae39d1689928a3b980f9eff6f57d"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-e38bbfd43b103b8c021b1b2ebb91aa458a354a3e.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-e38bbfd43b103b8c021b1b2ebb91aa458a354a3e-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_e38b_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-e38bbfd43b103b8c021b1b2ebb91aa458a354a3e"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-e38bbfd43b103b8c021b1b2ebb91aa458a354a3e.tar.gz

  linux_arm_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: bc5716f0746370aea62fd0a9491f2125f762e287
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-bc5716f0746370aea62fd0a9491f2125f762e287-{{checksum ".buildcache/cache-keys/package-bc5716f0746370aea62fd0a9491f2125f762e287"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_3605_{{checksum ".buildcache/cache-keys/copy-source-3605c989bed76fbc065448076073fee6c6f1a948"}}
          - cache001-warm-go-build-vendor-cache_312c_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-312c77dae140444ec203a96c9a904816ea523ea1"}}
          - cache001-build-static-assets_8cd9_{{checksum ".buildcache/cache-keys/build-static-assets-8cd9996410d9fabd04f4492e46267f8d050b86c9"}}
          - cache001-build-ui_d1b1_{{checksum ".buildcache/cache-keys/build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90"}}
          - cache001-ui-dependencies_db53_{{checksum ".buildcache/cache-keys/ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873"}}
          - cache001-install-yarn_7b37_{{checksum ".buildcache/cache-keys/install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd"}}
          - cache001-set-workdir_cdfe_{{checksum ".buildcache/cache-keys/set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e"}}
          - cache001-install-go-tools_74ba_{{checksum ".buildcache/cache-keys/install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2"}}
          - cache001-install-go_fbcf_{{checksum ".buildcache/cache-keys/install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-bc5716f0746370aea62fd0a9491f2125f762e287-{{checksum ".buildcache/cache-keys/package-bc5716f0746370aea62fd0a9491f2125f762e287"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-312c77dae140444ec203a96c9a904816ea523ea1.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-312c77dae140444ec203a96c9a904816ea523ea1-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_312c_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-312c77dae140444ec203a96c9a904816ea523ea1"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-312c77dae140444ec203a96c9a904816ea523ea1.tar.gz

  linux_arm64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 0684d2d2ed35b3c31d125764cf59bd79b2673f19
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-0684d2d2ed35b3c31d125764cf59bd79b2673f19-{{checksum ".buildcache/cache-keys/package-0684d2d2ed35b3c31d125764cf59bd79b2673f19"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_ce6b_{{checksum ".buildcache/cache-keys/copy-source-ce6b682f01ddcb468b6f1951d95ba574e151789d"}}
          - cache001-warm-go-build-vendor-cache_cd0e_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-cd0e40b5a4be3260ddb9e0ab2d78e2e61926e506"}}
          - cache001-build-static-assets_8cd9_{{checksum ".buildcache/cache-keys/build-static-assets-8cd9996410d9fabd04f4492e46267f8d050b86c9"}}
          - cache001-build-ui_d1b1_{{checksum ".buildcache/cache-keys/build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90"}}
          - cache001-ui-dependencies_db53_{{checksum ".buildcache/cache-keys/ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873"}}
          - cache001-install-yarn_7b37_{{checksum ".buildcache/cache-keys/install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd"}}
          - cache001-set-workdir_cdfe_{{checksum ".buildcache/cache-keys/set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e"}}
          - cache001-install-go-tools_74ba_{{checksum ".buildcache/cache-keys/install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2"}}
          - cache001-install-go_fbcf_{{checksum ".buildcache/cache-keys/install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-0684d2d2ed35b3c31d125764cf59bd79b2673f19-{{checksum ".buildcache/cache-keys/package-0684d2d2ed35b3c31d125764cf59bd79b2673f19"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-cd0e40b5a4be3260ddb9e0ab2d78e2e61926e506.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-cd0e40b5a4be3260ddb9e0ab2d78e2e61926e506-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_cd0e_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-cd0e40b5a4be3260ddb9e0ab2d78e2e61926e506"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-cd0e40b5a4be3260ddb9e0ab2d78e2e61926e506.tar.gz

  netbsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 7bc01ee838c14d8da70a48c70ca4cc83da13fdf4
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-7bc01ee838c14d8da70a48c70ca4cc83da13fdf4-{{checksum ".buildcache/cache-keys/package-7bc01ee838c14d8da70a48c70ca4cc83da13fdf4"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_c2d3_{{checksum ".buildcache/cache-keys/copy-source-c2d33028c24f45c7f99c87cfbad90b36c8bf7afe"}}
          - cache001-warm-go-build-vendor-cache_42bd_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-42bdf54c524860152449edd60fff67c948adb419"}}
          - cache001-build-static-assets_8cd9_{{checksum ".buildcache/cache-keys/build-static-assets-8cd9996410d9fabd04f4492e46267f8d050b86c9"}}
          - cache001-build-ui_d1b1_{{checksum ".buildcache/cache-keys/build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90"}}
          - cache001-ui-dependencies_db53_{{checksum ".buildcache/cache-keys/ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873"}}
          - cache001-install-yarn_7b37_{{checksum ".buildcache/cache-keys/install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd"}}
          - cache001-set-workdir_cdfe_{{checksum ".buildcache/cache-keys/set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e"}}
          - cache001-install-go-tools_74ba_{{checksum ".buildcache/cache-keys/install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2"}}
          - cache001-install-go_fbcf_{{checksum ".buildcache/cache-keys/install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-7bc01ee838c14d8da70a48c70ca4cc83da13fdf4-{{checksum ".buildcache/cache-keys/package-7bc01ee838c14d8da70a48c70ca4cc83da13fdf4"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-42bdf54c524860152449edd60fff67c948adb419.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-42bdf54c524860152449edd60fff67c948adb419-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_42bd_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-42bdf54c524860152449edd60fff67c948adb419"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-42bdf54c524860152449edd60fff67c948adb419.tar.gz

  netbsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: e0245e372ebcc050ecc48ff41a011a37f959318f
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-e0245e372ebcc050ecc48ff41a011a37f959318f-{{checksum ".buildcache/cache-keys/package-e0245e372ebcc050ecc48ff41a011a37f959318f"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_ec0d_{{checksum ".buildcache/cache-keys/copy-source-ec0d02c2aa437892b04beaed7ad000b5bff22548"}}
          - cache001-warm-go-build-vendor-cache_f9bf_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-f9bfe9e60286d7620cbf007aaf9f7ca90f304def"}}
          - cache001-build-static-assets_8cd9_{{checksum ".buildcache/cache-keys/build-static-assets-8cd9996410d9fabd04f4492e46267f8d050b86c9"}}
          - cache001-build-ui_d1b1_{{checksum ".buildcache/cache-keys/build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90"}}
          - cache001-ui-dependencies_db53_{{checksum ".buildcache/cache-keys/ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873"}}
          - cache001-install-yarn_7b37_{{checksum ".buildcache/cache-keys/install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd"}}
          - cache001-set-workdir_cdfe_{{checksum ".buildcache/cache-keys/set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e"}}
          - cache001-install-go-tools_74ba_{{checksum ".buildcache/cache-keys/install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2"}}
          - cache001-install-go_fbcf_{{checksum ".buildcache/cache-keys/install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-e0245e372ebcc050ecc48ff41a011a37f959318f-{{checksum ".buildcache/cache-keys/package-e0245e372ebcc050ecc48ff41a011a37f959318f"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-f9bfe9e60286d7620cbf007aaf9f7ca90f304def.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-f9bfe9e60286d7620cbf007aaf9f7ca90f304def-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_f9bf_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-f9bfe9e60286d7620cbf007aaf9f7ca90f304def"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-f9bfe9e60286d7620cbf007aaf9f7ca90f304def.tar.gz

  openbsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 07f6c18aad4ad4b670f4fce20dca6230b30589a8
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-07f6c18aad4ad4b670f4fce20dca6230b30589a8-{{checksum ".buildcache/cache-keys/package-07f6c18aad4ad4b670f4fce20dca6230b30589a8"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_1a5d_{{checksum ".buildcache/cache-keys/copy-source-1a5dcc5573cbe4f80b8ec0961a88fe248c36f8a5"}}
          - cache001-warm-go-build-vendor-cache_2a4d_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-2a4d3498359e3ef045c6bf6375297fbf46c37b52"}}
          - cache001-build-static-assets_8cd9_{{checksum ".buildcache/cache-keys/build-static-assets-8cd9996410d9fabd04f4492e46267f8d050b86c9"}}
          - cache001-build-ui_d1b1_{{checksum ".buildcache/cache-keys/build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90"}}
          - cache001-ui-dependencies_db53_{{checksum ".buildcache/cache-keys/ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873"}}
          - cache001-install-yarn_7b37_{{checksum ".buildcache/cache-keys/install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd"}}
          - cache001-set-workdir_cdfe_{{checksum ".buildcache/cache-keys/set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e"}}
          - cache001-install-go-tools_74ba_{{checksum ".buildcache/cache-keys/install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2"}}
          - cache001-install-go_fbcf_{{checksum ".buildcache/cache-keys/install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-07f6c18aad4ad4b670f4fce20dca6230b30589a8-{{checksum ".buildcache/cache-keys/package-07f6c18aad4ad4b670f4fce20dca6230b30589a8"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-2a4d3498359e3ef045c6bf6375297fbf46c37b52.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-2a4d3498359e3ef045c6bf6375297fbf46c37b52-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_2a4d_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-2a4d3498359e3ef045c6bf6375297fbf46c37b52"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-2a4d3498359e3ef045c6bf6375297fbf46c37b52.tar.gz

  openbsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 53b719794b2a9cc1f9a260d7376def13008f5dee
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-53b719794b2a9cc1f9a260d7376def13008f5dee-{{checksum ".buildcache/cache-keys/package-53b719794b2a9cc1f9a260d7376def13008f5dee"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_e77e_{{checksum ".buildcache/cache-keys/copy-source-e77e2864a98dda0e3be70684b4eae8cc8400b27e"}}
          - cache001-warm-go-build-vendor-cache_83e8_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-83e84a5f4e93dc9a196f76728eabf0eca07d16b9"}}
          - cache001-build-static-assets_8cd9_{{checksum ".buildcache/cache-keys/build-static-assets-8cd9996410d9fabd04f4492e46267f8d050b86c9"}}
          - cache001-build-ui_d1b1_{{checksum ".buildcache/cache-keys/build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90"}}
          - cache001-ui-dependencies_db53_{{checksum ".buildcache/cache-keys/ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873"}}
          - cache001-install-yarn_7b37_{{checksum ".buildcache/cache-keys/install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd"}}
          - cache001-set-workdir_cdfe_{{checksum ".buildcache/cache-keys/set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e"}}
          - cache001-install-go-tools_74ba_{{checksum ".buildcache/cache-keys/install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2"}}
          - cache001-install-go_fbcf_{{checksum ".buildcache/cache-keys/install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-53b719794b2a9cc1f9a260d7376def13008f5dee-{{checksum ".buildcache/cache-keys/package-53b719794b2a9cc1f9a260d7376def13008f5dee"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-83e84a5f4e93dc9a196f76728eabf0eca07d16b9.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-83e84a5f4e93dc9a196f76728eabf0eca07d16b9-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_83e8_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-83e84a5f4e93dc9a196f76728eabf0eca07d16b9"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-83e84a5f4e93dc9a196f76728eabf0eca07d16b9.tar.gz

  solaris_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: a11e2b045b51a8b971886e78da3048200f2fd374
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-a11e2b045b51a8b971886e78da3048200f2fd374-{{checksum ".buildcache/cache-keys/package-a11e2b045b51a8b971886e78da3048200f2fd374"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_98f3_{{checksum ".buildcache/cache-keys/copy-source-98f31d78f447dc5ae07857e1e7dfc2566e703484"}}
          - cache001-warm-go-build-vendor-cache_b86f_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-b86ff9ab5fe53bdb79f51407f9c1ba8fc22a0542"}}
          - cache001-build-static-assets_8cd9_{{checksum ".buildcache/cache-keys/build-static-assets-8cd9996410d9fabd04f4492e46267f8d050b86c9"}}
          - cache001-build-ui_d1b1_{{checksum ".buildcache/cache-keys/build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90"}}
          - cache001-ui-dependencies_db53_{{checksum ".buildcache/cache-keys/ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873"}}
          - cache001-install-yarn_7b37_{{checksum ".buildcache/cache-keys/install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd"}}
          - cache001-set-workdir_cdfe_{{checksum ".buildcache/cache-keys/set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e"}}
          - cache001-install-go-tools_74ba_{{checksum ".buildcache/cache-keys/install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2"}}
          - cache001-install-go_fbcf_{{checksum ".buildcache/cache-keys/install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-a11e2b045b51a8b971886e78da3048200f2fd374-{{checksum ".buildcache/cache-keys/package-a11e2b045b51a8b971886e78da3048200f2fd374"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-b86ff9ab5fe53bdb79f51407f9c1ba8fc22a0542.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-b86ff9ab5fe53bdb79f51407f9c1ba8fc22a0542-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_b86f_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-b86ff9ab5fe53bdb79f51407f9c1ba8fc22a0542"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-b86ff9ab5fe53bdb79f51407f9c1ba8fc22a0542.tar.gz

  windows_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 25c98b4147329ec9fbf21447d77ed5b1cf422476
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-25c98b4147329ec9fbf21447d77ed5b1cf422476-{{checksum ".buildcache/cache-keys/package-25c98b4147329ec9fbf21447d77ed5b1cf422476"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_a782_{{checksum ".buildcache/cache-keys/copy-source-a782c3ca214650d50838512f32a02e40bc0a3da0"}}
          - cache001-warm-go-build-vendor-cache_0ec3_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-0ec362849fed6116b8c5ba4488f206b8d6de6a96"}}
          - cache001-build-static-assets_8cd9_{{checksum ".buildcache/cache-keys/build-static-assets-8cd9996410d9fabd04f4492e46267f8d050b86c9"}}
          - cache001-build-ui_d1b1_{{checksum ".buildcache/cache-keys/build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90"}}
          - cache001-ui-dependencies_db53_{{checksum ".buildcache/cache-keys/ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873"}}
          - cache001-install-yarn_7b37_{{checksum ".buildcache/cache-keys/install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd"}}
          - cache001-set-workdir_cdfe_{{checksum ".buildcache/cache-keys/set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e"}}
          - cache001-install-go-tools_74ba_{{checksum ".buildcache/cache-keys/install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2"}}
          - cache001-install-go_fbcf_{{checksum ".buildcache/cache-keys/install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-25c98b4147329ec9fbf21447d77ed5b1cf422476-{{checksum ".buildcache/cache-keys/package-25c98b4147329ec9fbf21447d77ed5b1cf422476"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-0ec362849fed6116b8c5ba4488f206b8d6de6a96.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-0ec362849fed6116b8c5ba4488f206b8d6de6a96-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_0ec3_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-0ec362849fed6116b8c5ba4488f206b8d6de6a96"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-0ec362849fed6116b8c5ba4488f206b8d6de6a96.tar.gz

  windows_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 2193583d17d4c7579c21b093b1d01d6864085391
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-2193583d17d4c7579c21b093b1d01d6864085391-{{checksum ".buildcache/cache-keys/package-2193583d17d4c7579c21b093b1d01d6864085391"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_160a_{{checksum ".buildcache/cache-keys/copy-source-160a14fab5abc897c180fe361d7d5940db53960b"}}
          - cache001-warm-go-build-vendor-cache_010a_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-010a4449643e9546ac50b5a3c20b9d007d1cc6a0"}}
          - cache001-build-static-assets_8cd9_{{checksum ".buildcache/cache-keys/build-static-assets-8cd9996410d9fabd04f4492e46267f8d050b86c9"}}
          - cache001-build-ui_d1b1_{{checksum ".buildcache/cache-keys/build-ui-d1b19ede2e9e93ce933fdf0b478431cabd025d90"}}
          - cache001-ui-dependencies_db53_{{checksum ".buildcache/cache-keys/ui-dependencies-db537e5c6442d4efa1c7df1bc123bffd5fa88873"}}
          - cache001-install-yarn_7b37_{{checksum ".buildcache/cache-keys/install-yarn-7b37c5d96e7ff94e29b981b1efccd5f2fe6861cd"}}
          - cache001-set-workdir_cdfe_{{checksum ".buildcache/cache-keys/set-workdir-cdfef4442dd3f6ccfd1661d940543749f4715b7e"}}
          - cache001-install-go-tools_74ba_{{checksum ".buildcache/cache-keys/install-go-tools-74ba8a2d77eb3970e7952d163143359521dbb2d2"}}
          - cache001-install-go_fbcf_{{checksum ".buildcache/cache-keys/install-go-fbcf458c9f828d52a70be049d4fe10ecb4bf0640"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-2193583d17d4c7579c21b093b1d01d6864085391-{{checksum ".buildcache/cache-keys/package-2193583d17d4c7579c21b093b1d01d6864085391"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-010a4449643e9546ac50b5a3c20b9d007d1cc6a0.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-010a4449643e9546ac50b5a3c20b9d007d1cc6a0-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_010a_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-010a4449643e9546ac50b5a3c20b9d007d1cc6a0"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-010a4449643e9546ac50b5a3c20b9d007d1cc6a0.tar.gz


  bundle-releases:
    executor: releaser
    steps:
      - checkout
      - write-all-package-cache-keys
      - load-darwin_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 61871b3ed23b4cefc037b37f54b0014b478c3eea
          name: Write package metadata for darwin_386_package
          command: |
            make package-meta
      - load-darwin_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: a3192145511b5ad6d246ee27a01ac932e381592c
          name: Write package metadata for darwin_amd64_package
          command: |
            make package-meta
      - load-freebsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 430fb9b075b7f52cfc67c784ab44d732b36387c5
          name: Write package metadata for freebsd_386_package
          command: |
            make package-meta
      - load-freebsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 9a0c6676c8c25b5373ff27780493b10911f211ee
          name: Write package metadata for freebsd_amd64_package
          command: |
            make package-meta
      - load-freebsd_arm_package
      - run:
          environment:
            PACKAGE_SPEC_ID: cbf12661d9d21871d5a95e40b4368920e242b434
          name: Write package metadata for freebsd_arm_package
          command: |
            make package-meta
      - load-linux_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: d07ca803659a6ed237a4f63de25d7bd6bed17e0f
          name: Write package metadata for linux_386_package
          command: |
            make package-meta
      - load-linux_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 29f9988a89a2ae39d1689928a3b980f9eff6f57d
          name: Write package metadata for linux_amd64_package
          command: |
            make package-meta
      - load-linux_arm_package
      - run:
          environment:
            PACKAGE_SPEC_ID: bc5716f0746370aea62fd0a9491f2125f762e287
          name: Write package metadata for linux_arm_package
          command: |
            make package-meta
      - load-linux_arm64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 0684d2d2ed35b3c31d125764cf59bd79b2673f19
          name: Write package metadata for linux_arm64_package
          command: |
            make package-meta
      - load-netbsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 7bc01ee838c14d8da70a48c70ca4cc83da13fdf4
          name: Write package metadata for netbsd_386_package
          command: |
            make package-meta
      - load-netbsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: e0245e372ebcc050ecc48ff41a011a37f959318f
          name: Write package metadata for netbsd_amd64_package
          command: |
            make package-meta
      - load-openbsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 07f6c18aad4ad4b670f4fce20dca6230b30589a8
          name: Write package metadata for openbsd_386_package
          command: |
            make package-meta
      - load-openbsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 53b719794b2a9cc1f9a260d7376def13008f5dee
          name: Write package metadata for openbsd_amd64_package
          command: |
            make package-meta
      - load-solaris_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: a11e2b045b51a8b971886e78da3048200f2fd374
          name: Write package metadata for solaris_amd64_package
          command: |
            make package-meta
      - load-windows_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 25c98b4147329ec9fbf21447d77ed5b1cf422476
          name: Write package metadata for windows_386_package
          command: |
            make package-meta
      - load-windows_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 2193583d17d4c7579c21b093b1d01d6864085391
          name: Write package metadata for windows_amd64_package
          command: |
            make package-meta
      - run:
          name: Write package aliases
          command:
            make aliases
      - run:
          name: List Build Cache
          command: ls -lahR .buildcache

      # Give the lockfile a name store_artifacts can work with.
      - run: cp packages*.lock/pkgs.yml lockfile-d1c17df8afc8ee11f8c4c6e652cfce7190e57c00-77fd4e8a5a9c224b.yml

      # Surface the lock file as an artifact.
      - store_artifacts:
          path: lockfile-d1c17df8afc8ee11f8c4c6e652cfce7190e57c00-77fd4e8a5a9c224b.yml
          destination: lockfile-d1c17df8afc8ee11f8c4c6e652cfce7190e57c00-77fd4e8a5a9c224b.yml

      # Surface the package store directory as an artifact.
      # This makes each zipped package separately downloadable.
      - store_artifacts:
          path: .buildcache/packages
          destination: packages-d1c17df8afc8ee11f8c4c6e652cfce7190e57c00-77fd4e8a5a9c224b

      # Surface a tarball of the whole package store plus lockfile as an artifact.
      - run: tar -czf packages-d1c17df8afc8ee11f8c4c6e652cfce7190e57c00-77fd4e8a5a9c224b.tar.gz .buildcache/packages lockfile-d1c17df8afc8ee11f8c4c6e652cfce7190e57c00-77fd4e8a5a9c224b.yml
      - store_artifacts:
          path: packages-d1c17df8afc8ee11f8c4c6e652cfce7190e57c00-77fd4e8a5a9c224b.tar.gz
          destination: packages-d1c17df8afc8ee11f8c4c6e652cfce7190e57c00-77fd4e8a5a9c224b.tar.gz

      # Surface a tarball of just the metadata files.
      - run: tar -czf meta-d1c17df8afc8ee11f8c4c6e652cfce7190e57c00-77fd4e8a5a9c224b.tar.gz .buildcache/packages/store/*.json lockfile-d1c17df8afc8ee11f8c4c6e652cfce7190e57c00-77fd4e8a5a9c224b.yml
      - store_artifacts:
          path: meta-d1c17df8afc8ee11f8c4c6e652cfce7190e57c00-77fd4e8a5a9c224b.tar.gz
          destination: meta-d1c17df8afc8ee11f8c4c6e652cfce7190e57c00-77fd4e8a5a9c224b.tar.gz

commands:
  load-darwin_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-61871b3ed23b4cefc037b37f54b0014b478c3eea-{{checksum ".buildcache/cache-keys/package-61871b3ed23b4cefc037b37f54b0014b478c3eea"}}'
  
  load-darwin_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-a3192145511b5ad6d246ee27a01ac932e381592c-{{checksum ".buildcache/cache-keys/package-a3192145511b5ad6d246ee27a01ac932e381592c"}}'
  
  load-freebsd_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-430fb9b075b7f52cfc67c784ab44d732b36387c5-{{checksum ".buildcache/cache-keys/package-430fb9b075b7f52cfc67c784ab44d732b36387c5"}}'
  
  load-freebsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-9a0c6676c8c25b5373ff27780493b10911f211ee-{{checksum ".buildcache/cache-keys/package-9a0c6676c8c25b5373ff27780493b10911f211ee"}}'
  
  load-freebsd_arm_package:
    steps:
      - restore_cache:
          key: 'cache001-package-cbf12661d9d21871d5a95e40b4368920e242b434-{{checksum ".buildcache/cache-keys/package-cbf12661d9d21871d5a95e40b4368920e242b434"}}'
  
  load-linux_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-d07ca803659a6ed237a4f63de25d7bd6bed17e0f-{{checksum ".buildcache/cache-keys/package-d07ca803659a6ed237a4f63de25d7bd6bed17e0f"}}'
  
  load-linux_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-29f9988a89a2ae39d1689928a3b980f9eff6f57d-{{checksum ".buildcache/cache-keys/package-29f9988a89a2ae39d1689928a3b980f9eff6f57d"}}'
  
  load-linux_arm_package:
    steps:
      - restore_cache:
          key: 'cache001-package-bc5716f0746370aea62fd0a9491f2125f762e287-{{checksum ".buildcache/cache-keys/package-bc5716f0746370aea62fd0a9491f2125f762e287"}}'
  
  load-linux_arm64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-0684d2d2ed35b3c31d125764cf59bd79b2673f19-{{checksum ".buildcache/cache-keys/package-0684d2d2ed35b3c31d125764cf59bd79b2673f19"}}'
  
  load-netbsd_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-7bc01ee838c14d8da70a48c70ca4cc83da13fdf4-{{checksum ".buildcache/cache-keys/package-7bc01ee838c14d8da70a48c70ca4cc83da13fdf4"}}'
  
  load-netbsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-e0245e372ebcc050ecc48ff41a011a37f959318f-{{checksum ".buildcache/cache-keys/package-e0245e372ebcc050ecc48ff41a011a37f959318f"}}'
  
  load-openbsd_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-07f6c18aad4ad4b670f4fce20dca6230b30589a8-{{checksum ".buildcache/cache-keys/package-07f6c18aad4ad4b670f4fce20dca6230b30589a8"}}'
  
  load-openbsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-53b719794b2a9cc1f9a260d7376def13008f5dee-{{checksum ".buildcache/cache-keys/package-53b719794b2a9cc1f9a260d7376def13008f5dee"}}'
  
  load-solaris_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-a11e2b045b51a8b971886e78da3048200f2fd374-{{checksum ".buildcache/cache-keys/package-a11e2b045b51a8b971886e78da3048200f2fd374"}}'
  
  load-windows_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-25c98b4147329ec9fbf21447d77ed5b1cf422476-{{checksum ".buildcache/cache-keys/package-25c98b4147329ec9fbf21447d77ed5b1cf422476"}}'
  
  load-windows_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-2193583d17d4c7579c21b093b1d01d6864085391-{{checksum ".buildcache/cache-keys/package-2193583d17d4c7579c21b093b1d01d6864085391"}}'
  

  write-build-layer-cache-keys:
    steps:
      - run:
          name: Write builder layer cache keys
          command: make -C packages*.lock write-builder-cache-keys

  write-package-cache-key:
    steps:
      - run:
          name: Write package cache key
          command: make -C packages*.lock write-package-cache-key

  write-all-package-cache-keys:
    steps:
      - run:
          name: Write package cache key
          command: make -C packages*.lock write-all-package-cache-keys
